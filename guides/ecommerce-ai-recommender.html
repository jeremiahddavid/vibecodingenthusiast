<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Primary Meta Tags -->
    <title>Build an AI Product Recommendation Engine | AI Build Guides | Vibe Coding Enthusiast</title>
    <meta name="title" content="Build an AI Product Recommendation Engine | AI Build Guides | Vibe Coding Enthusiast">
    <meta name="description" content="Learn to build an AI-powered product recommendation engine for e-commerce using OpenAI embeddings, pgvector, and Claude. Complete guide with code examples.">
    <meta name="keywords" content="product recommendations, ai recommendations, embeddings, pgvector, vector search, ecommerce ai, personalization, ai development, vibe coding, build guide, tutorial">
    <meta name="author" content="Vibe Coding Enthusiast">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://vibecodingenthusiast.com/guides/ecommerce-ai-recommender.html">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://vibecodingenthusiast.com/guides/ecommerce-ai-recommender.html">
    <meta property="og:title" content="Build an AI Product Recommendation Engine | AI Build Guides">
    <meta property="og:description" content="Learn to build an AI-powered product recommendation engine for e-commerce using OpenAI embeddings, pgvector, and Claude. Complete guide with code examples.">
    <meta property="og:image" content="https://vibecodingenthusiast.com/guides/images/ecommerce-ai-recommender-og.png">
    <meta property="og:site_name" content="Vibe Coding Enthusiast">
    <meta property="og:locale" content="en_US">
    <meta property="article:published_time" content="2025-01-14">
    <meta property="article:modified_time" content="2025-01-14">
    <meta property="article:author" content="Vibe Coding Enthusiast">
    <meta property="article:section" content="AI Build Guides">
    <meta property="article:tag" content="E-commerce">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://vibecodingenthusiast.com/guides/ecommerce-ai-recommender.html">
    <meta name="twitter:title" content="Build an AI Product Recommendation Engine | AI Build Guides">
    <meta name="twitter:description" content="Learn to build an AI-powered product recommendation engine for e-commerce using OpenAI embeddings, pgvector, and Claude. Complete guide with code examples.">
    <meta name="twitter:image" content="https://vibecodingenthusiast.com/guides/images/ecommerce-ai-recommender-og.png">
    <meta name="twitter:creator" content="@vibecodingenthusiast">

    <!-- Schema.org JSON-LD for TechArticle -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "TechArticle",
        "headline": "Build an AI Product Recommendation Engine",
        "description": "Learn to build an AI-powered product recommendation engine for e-commerce using OpenAI embeddings, pgvector, and Claude. Complete guide with code examples.",
        "image": "https://vibecodingenthusiast.com/guides/images/ecommerce-ai-recommender-og.png",
        "author": {
            "@type": "Organization",
            "name": "Vibe Coding Enthusiast",
            "url": "https://vibecodingenthusiast.com"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Vibe Coding Enthusiast",
            "logo": {
                "@type": "ImageObject",
                "url": "https://vibecodingenthusiast.com/favicon.png"
            }
        },
        "datePublished": "2025-01-14",
        "dateModified": "2025-01-14",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://vibecodingenthusiast.com/guides/ecommerce-ai-recommender.html"
        },
        "articleSection": "AI Build Guides",
        "keywords": "product recommendations, ai recommendations, embeddings, pgvector, vector search, ecommerce ai",
        "proficiencyLevel": "Intermediate",
        "dependencies": "Next.js 14, TypeScript, Supabase, OpenAI API, Anthropic API",
        "timeRequired": "PT240M"
    }
    </script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/styles.css">

    <!-- Guide-Specific Styles -->
    <style>
        /* Reading Progress Bar */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-green));
            z-index: 1001;
            transition: width 0.1s ease-out;
        }

        /* Article Header */
        .article-header {
            padding: 140px 0 60px;
            background: linear-gradient(135deg, rgba(251, 146, 60, 0.08) 0%, transparent 50%);
            position: relative;
            overflow: hidden;
        }
        .article-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(251, 146, 60, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
        }

        /* Breadcrumb */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-bottom: 24px;
            flex-wrap: wrap;
        }
        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        .breadcrumb a:hover {
            color: var(--accent-primary);
        }
        .breadcrumb-separator {
            color: var(--text-muted);
        }
        .breadcrumb-current {
            color: var(--text-primary);
        }

        /* Guide Meta Badges */
        .guide-meta {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .badge-beginner {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        .badge-intermediate {
            background: rgba(245, 158, 11, 0.15);
            color: #f59e0b;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        .badge-advanced {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        .badge-time {
            background: rgba(129, 140, 248, 0.15);
            color: var(--accent-primary);
            border: 1px solid rgba(129, 140, 248, 0.3);
        }
        .badge-time svg {
            width: 14px;
            height: 14px;
        }
        .badge-ecommerce {
            background: rgba(251, 146, 60, 0.15);
            color: #fb923c;
            border: 1px solid rgba(251, 146, 60, 0.3);
        }

        /* Article Title */
        .article-header h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 20px;
            max-width: 900px;
        }
        .article-header .lead {
            font-size: 1.2rem;
            color: var(--text-secondary);
            line-height: 1.7;
            max-width: 700px;
            margin-bottom: 28px;
        }

        /* Share Buttons in Header */
        .share-buttons {
            display: flex;
            gap: 10px;
        }
        .share-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .share-btn:hover {
            background: var(--bg-secondary);
            color: var(--accent-primary);
            border-color: var(--accent-primary);
        }
        .share-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Article Layout - Main Content with Sidebar */
        .article-layout {
            display: grid;
            grid-template-columns: 260px 1fr;
            gap: 60px;
            max-width: 1400px;
            margin: 0 auto;
            padding: clamp(32px, 5vw, 60px) clamp(16px, 4vw, 24px);
        }
        @media (max-width: 1100px) {
            .article-layout {
                grid-template-columns: 1fr;
                gap: 40px;
            }
        }

        /* Table of Contents Sidebar */
        .toc-sidebar {
            position: sticky;
            top: 100px;
            height: fit-content;
            max-height: calc(100vh - 140px);
            overflow-y: auto;
        }
        @media (max-width: 1100px) {
            .toc-sidebar {
                position: static;
                background: var(--bg-card);
                border: 1px solid var(--border-color);
                border-radius: var(--radius-lg);
                padding: 24px;
            }
        }
        .toc-title {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 16px;
        }
        .toc-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .toc-list li {
            margin-bottom: 8px;
        }
        .toc-list a {
            display: block;
            padding: 8px 12px;
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 2px solid transparent;
            transition: all 0.2s ease;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }
        .toc-list a:hover {
            color: var(--text-primary);
            background: rgba(251, 146, 60, 0.08);
        }
        .toc-list a.active {
            color: #fb923c;
            border-left-color: #fb923c;
            background: rgba(251, 146, 60, 0.1);
        }
        .toc-list .toc-h3 {
            padding-left: 24px;
            font-size: 0.8125rem;
        }

        /* Article Content */
        .article-content {
            max-width: 800px;
        }
        .article-content h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-top: 56px;
            margin-bottom: 20px;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
        }
        .article-content h2:first-of-type {
            margin-top: 0;
            padding-top: 0;
            border-top: none;
        }
        .article-content h3 {
            font-size: 1.375rem;
            font-weight: 600;
            margin-top: 40px;
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        .article-content p {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 20px;
        }
        .article-content ul,
        .article-content ol {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 20px;
            padding-left: 24px;
        }
        .article-content li {
            margin-bottom: 8px;
        }
        .article-content strong {
            color: var(--text-primary);
        }

        /* Tech Stack Table */
        .tech-stack-table {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0 32px;
            font-size: 0.9rem;
        }
        .tech-stack-table thead {
            background: var(--bg-secondary);
        }
        .tech-stack-table th {
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border-color);
        }
        .tech-stack-table td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }
        .tech-stack-table tbody tr:hover {
            background: rgba(251, 146, 60, 0.04);
        }
        .tech-stack-table code {
            background: var(--bg-secondary);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.85em;
            font-family: 'JetBrains Mono', monospace;
        }

        /* Code Blocks */
        .code-block {
            position: relative;
            margin: 24px 0;
            border-radius: var(--radius-lg);
            overflow: hidden;
            background: #1a1b26;
            border: 1px solid var(--border-color);
        }
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 16px;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .code-lang {
            font-size: 0.75rem;
            font-weight: 500;
            color: #a9b1d6;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .code-block pre {
            margin: 0;
            padding: 20px 24px;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            line-height: 1.7;
            color: #c0caf5;
        }
        .code-block code {
            font-family: inherit;
        }
        .code-copy-btn {
            padding: 6px 12px;
            font-size: 0.75rem;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-sm);
            color: #a9b1d6;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .code-copy-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
        }
        .code-copy-btn.copied {
            background: rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.4);
            color: #10b981;
        }

        /* Code Syntax Highlighting */
        .code-block .keyword { color: #bb9af7; }
        .code-block .string { color: #9ece6a; }
        .code-block .comment { color: #565f89; font-style: italic; }
        .code-block .function { color: #7aa2f7; }
        .code-block .variable { color: #c0caf5; }
        .code-block .property { color: #73daca; }
        .code-block .number { color: #ff9e64; }
        .code-block .operator { color: #89ddff; }
        .code-block .type { color: #2ac3de; }

        /* Callout Boxes */
        .callout {
            padding: 20px 24px;
            border-radius: var(--radius-lg);
            margin: 24px 0;
            border-left: 4px solid;
        }
        .callout-tip {
            background: rgba(16, 185, 129, 0.1);
            border-color: #10b981;
        }
        .callout-tip .callout-title { color: #10b981; }
        .callout-warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: #f59e0b;
        }
        .callout-warning .callout-title { color: #f59e0b; }
        .callout-info {
            background: rgba(129, 140, 248, 0.1);
            border-color: var(--accent-primary);
        }
        .callout-info .callout-title { color: var(--accent-primary); }
        .callout-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .callout p {
            margin: 0;
            color: var(--text-secondary);
        }
        .callout code {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.85em;
            font-family: 'JetBrains Mono', monospace;
        }

        /* AI Workflow Cards */
        .ai-workflow-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin: 24px 0;
        }
        .ai-tool-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 24px;
            transition: all 0.3s ease;
        }
        .ai-tool-card:hover {
            border-color: #fb923c;
            transform: translateY(-2px);
        }
        .ai-tool-card h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .ai-tool-card h4 span {
            font-size: 1.25rem;
        }
        .ai-tool-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
            margin: 0;
        }
        .ai-tool-card ul {
            margin: 12px 0 0;
            padding-left: 20px;
            font-size: 0.875rem;
        }
        .ai-tool-card li {
            margin-bottom: 6px;
            color: var(--text-secondary);
        }

        /* Phase Progress Indicator */
        .phase-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
            padding: 12px 16px;
            background: rgba(251, 146, 60, 0.1);
            border-radius: var(--radius-md);
            border: 1px solid rgba(251, 146, 60, 0.2);
        }
        .phase-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: #fb923c;
            color: white;
            font-weight: 700;
            border-radius: 50%;
            font-size: 0.9rem;
        }
        .phase-title {
            font-weight: 600;
            color: var(--text-primary);
        }
        .phase-time {
            margin-left: auto;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Share Section at Bottom */
        .share-section {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
            padding: 32px 0;
            margin-top: 48px;
            border-top: 1px solid var(--border-color);
        }
        .share-label {
            font-weight: 500;
            color: var(--text-secondary);
        }

        /* Related Guides */
        .related-guides {
            margin-top: 64px;
            padding-top: 48px;
            border-top: 1px solid var(--border-color);
        }
        .related-guides-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 24px;
        }
        .related-guides-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
        }
        .related-guide-card {
            display: block;
            padding: 24px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .related-guide-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }
        .related-guide-card h4 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        .related-guide-card p {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin: 0;
            line-height: 1.5;
        }

        /* Newsletter Section */
        .newsletter-section {
            margin-top: 64px;
            padding: 40px;
            background: linear-gradient(135deg, rgba(251, 146, 60, 0.1), rgba(129, 140, 248, 0.05));
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            text-align: center;
        }
        .newsletter-section h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            margin-top: 0;
        }
        .newsletter-section > p {
            color: var(--text-secondary);
            margin-bottom: 24px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        .newsletter-form {
            display: flex;
            gap: 12px;
            max-width: 440px;
            margin: 0 auto;
        }
        .newsletter-form input[type="email"] {
            flex: 1;
            padding: 14px 18px;
            font-size: 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.2s ease;
        }
        .newsletter-form input[type="email"]:focus {
            border-color: var(--accent-primary);
        }
        .newsletter-form input[type="email"]::placeholder {
            color: var(--text-muted);
        }
        .newsletter-form button {
            padding: 14px 28px;
            font-size: 1rem;
            font-weight: 600;
            background: #fb923c;
            color: white;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        .newsletter-form button:hover {
            background: #ea580c;
            transform: translateY(-1px);
        }
        @media (max-width: 520px) {
            .newsletter-form {
                flex-direction: column;
            }
            .newsletter-form button {
                width: 100%;
            }
        }

        /* Image styling */
        .article-content img {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-lg);
            margin: 24px 0;
            border: 1px solid var(--border-color);
        }

        /* Anchor links */
        .article-content h2 .anchor-link,
        .article-content h3 .anchor-link {
            opacity: 0;
            margin-left: 8px;
            color: var(--text-muted);
            text-decoration: none;
            transition: opacity 0.2s ease;
        }
        .article-content h2:hover .anchor-link,
        .article-content h3:hover .anchor-link {
            opacity: 1;
        }
        .article-content h2 .anchor-link:hover,
        .article-content h3 .anchor-link:hover {
            color: #fb923c;
        }

        /* Inline code */
        .article-content code:not(.code-block code) {
            background: var(--bg-secondary);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.875em;
            font-family: 'JetBrains Mono', monospace;
            color: #fb923c;
        }

        /* Architecture Diagram */
        .architecture-box {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 32px;
            margin: 24px 0;
        }
        .architecture-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
        }
        .architecture-flow {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 16px;
        }
        .arch-node {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 16px 20px;
            text-align: center;
            min-width: 140px;
        }
        .arch-node-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }
        .arch-node-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
        }
        .arch-arrow {
            color: var(--text-muted);
            font-size: 1.25rem;
        }
        @media (max-width: 768px) {
            .architecture-flow {
                flex-direction: column;
            }
            .arch-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <!-- Reading Progress Bar -->
    <div class="reading-progress" id="readingProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Reading progress"></div>

    <!-- Header -->
    <header class="header">
        <nav class="nav container" role="navigation" aria-label="Main navigation">
            <a href="/" class="logo" aria-label="Vibe Coding Enthusiast - Home">
                <img src="/favicon.png" alt="Vibe Coding Enthusiast" class="logo-icon" width="28" height="28">
                <span class="logo-text">VibeCoding<span class="accent">Enthusiast</span></span>
            </a>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/guides/">Guides</a></li>
                <li><a href="/paths/">Paths</a></li>
                <li><a href="/learn/">Learn</a></li>
                <li><a href="/tools/">Tools</a></li>
                <li><a href="/stacks/">Stacks</a></li>
                <li><a href="/industries/">Industries</a></li>
                <li><a href="/#about">About</a></li>
            </ul>
            <div class="nav-actions">
                <a href="/guides/" class="btn btn-primary">Explore Guides</a>
            </div>
            <button class="mobile-menu-btn" aria-label="Toggle menu" aria-expanded="false">
                <span></span><span></span><span></span>
            </button>
        </nav>
    </header>

    <main id="main">
        <!-- Article Header -->
        <section class="article-header">
            <div class="container">
                <!-- Breadcrumb Navigation -->
                <nav class="breadcrumb" aria-label="Breadcrumb">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator" aria-hidden="true">/</span>
                    <a href="/guides/">Guides</a>
                    <span class="breadcrumb-separator" aria-hidden="true">/</span>
                    <span class="breadcrumb-current" aria-current="page">E-commerce AI Recommender</span>
                </nav>

                <!-- Guide Meta Badges -->
                <div class="guide-meta">
                    <span class="badge badge-ecommerce">E-commerce</span>
                    <span class="badge badge-intermediate">Intermediate</span>
                    <span class="badge badge-time">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        ~4 hours
                    </span>
                </div>

                <!-- Title -->
                <h1>Build an AI Product <span class="gradient-text">Recommendation Engine</span></h1>

                <!-- Description -->
                <p class="lead">Learn to build a production-ready product recommendation system using vector embeddings for similarity search and Claude for generating personalized recommendation descriptions.</p>

                <!-- Share Buttons -->
                <div class="share-buttons" role="group" aria-label="Share this guide">
                    <button class="share-btn" data-share="twitter" title="Share on Twitter" aria-label="Share on Twitter">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </button>
                    <button class="share-btn" data-share="linkedin" title="Share on LinkedIn" aria-label="Share on LinkedIn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </button>
                    <button class="share-btn" data-share="copy" title="Copy link" aria-label="Copy link to clipboard">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- Main Content with TOC Sidebar -->
        <div class="article-layout">
            <!-- Table of Contents Sidebar -->
            <aside class="toc-sidebar" aria-label="Table of contents">
                <div class="toc-title">On this page</div>
                <ul class="toc-list" id="tocList">
                    <noscript>
                        <li><a href="#overview">What We're Building</a></li>
                        <li><a href="#prerequisites">Prerequisites</a></li>
                        <li><a href="#tech-stack">Tech Stack</a></li>
                        <li><a href="#ai-workflow">AI Agent Workflow</a></li>
                        <li><a href="#build-steps">Build Steps</a></li>
                        <li><a href="#common-issues">Common Issues</a></li>
                        <li><a href="#next-steps">Next Steps</a></li>
                    </noscript>
                </ul>
            </aside>

            <!-- Article Content -->
            <article class="article-content">
                <!-- Section: What We're Building -->
                <h2 id="overview">What We're Building</h2>
                <p>In this guide, you'll build an AI-powered product recommendation engine that uses <strong>vector embeddings</strong> to find similar products and <strong>Claude</strong> to generate personalized recommendation descriptions. This is the same approach used by Amazon, Netflix, and Spotify to power their recommendation systems.</p>

                <p>By the end of this guide, you'll have a working e-commerce recommendation system that can:</p>
                <ul>
                    <li>Generate embeddings for your product catalog using OpenAI's embedding model</li>
                    <li>Store embeddings in Supabase with pgvector for fast similarity search</li>
                    <li>Find semantically similar products based on descriptions, not just categories</li>
                    <li>Generate personalized recommendation copy using Claude</li>
                    <li>Display recommendations in a beautiful, responsive carousel UI</li>
                </ul>

                <!-- Architecture Diagram -->
                <div class="architecture-box">
                    <div class="architecture-title">System Architecture</div>
                    <div class="architecture-flow">
                        <div class="arch-node">
                            <div class="arch-node-icon">üì¶</div>
                            <div class="arch-node-label">Product Data</div>
                        </div>
                        <div class="arch-arrow">‚Üí</div>
                        <div class="arch-node">
                            <div class="arch-node-icon">üß†</div>
                            <div class="arch-node-label">OpenAI Embeddings</div>
                        </div>
                        <div class="arch-arrow">‚Üí</div>
                        <div class="arch-node">
                            <div class="arch-node-icon">üóÑÔ∏è</div>
                            <div class="arch-node-label">Supabase pgvector</div>
                        </div>
                        <div class="arch-arrow">‚Üí</div>
                        <div class="arch-node">
                            <div class="arch-node-icon">üîç</div>
                            <div class="arch-node-label">Vector Search</div>
                        </div>
                        <div class="arch-arrow">‚Üí</div>
                        <div class="arch-node">
                            <div class="arch-node-icon">‚ú®</div>
                            <div class="arch-node-label">Claude Descriptions</div>
                        </div>
                    </div>
                </div>

                <!-- Section: Prerequisites -->
                <h2 id="prerequisites">Prerequisites</h2>
                <p>Before starting this guide, make sure you have the following:</p>
                <ul>
                    <li><strong>Node.js 18+</strong> installed on your machine</li>
                    <li><strong>Supabase account</strong> (free tier works perfectly)</li>
                    <li><strong>OpenAI API key</strong> for generating embeddings</li>
                    <li><strong>Anthropic API key</strong> for Claude-powered descriptions</li>
                    <li>Basic familiarity with <strong>React/Next.js</strong> and <strong>TypeScript</strong></li>
                    <li>Understanding of SQL basics (we'll write some queries)</li>
                </ul>

                <div class="callout callout-info">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                        Cost Estimate
                    </div>
                    <p>For a catalog of 1,000 products, embedding generation costs approximately $0.10 with OpenAI's text-embedding-3-small model. Claude API calls for descriptions will depend on usage but typically cost $0.01-0.05 per recommendation set.</p>
                </div>

                <!-- Section: Tech Stack -->
                <h2 id="tech-stack">Tech Stack Specification</h2>
                <p>Here's the technology stack we'll use for this build, chosen for production readiness and developer experience:</p>
                <table class="tech-stack-table">
                    <thead>
                        <tr>
                            <th scope="col">Layer</th>
                            <th scope="col">Technology</th>
                            <th scope="col">Why This Choice</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Frontend</strong></td>
                            <td>Next.js 14, TypeScript, Tailwind CSS</td>
                            <td>SSR for SEO, type safety prevents bugs, rapid UI development</td>
                        </tr>
                        <tr>
                            <td><strong>Backend</strong></td>
                            <td>Next.js API Routes</td>
                            <td>Serverless functions, zero config deployment, same codebase</td>
                        </tr>
                        <tr>
                            <td><strong>Database</strong></td>
                            <td>Supabase with pgvector</td>
                            <td>Native vector similarity search, generous free tier, real-time subscriptions</td>
                        </tr>
                        <tr>
                            <td><strong>AI - Embeddings</strong></td>
                            <td>OpenAI <code>text-embedding-3-small</code></td>
                            <td>Best price/performance for semantic search, 1536 dimensions</td>
                        </tr>
                        <tr>
                            <td><strong>AI - Generation</strong></td>
                            <td>Claude 3.5 Sonnet</td>
                            <td>Superior instruction following for natural recommendation copy</td>
                        </tr>
                        <tr>
                            <td><strong>Hosting</strong></td>
                            <td>Vercel</td>
                            <td>Optimized for Next.js, edge functions, automatic scaling</td>
                        </tr>
                    </tbody>
                </table>

                <!-- Section: AI Agent Workflow -->
                <h2 id="ai-workflow">AI Agent Workflow</h2>
                <p>Here's how to leverage AI tools throughout this build to maximize your productivity. Each tool has specific strengths that we'll exploit at different stages.</p>

                <div class="ai-workflow-grid">
                    <div class="ai-tool-card">
                        <h4><span>ü§ñ</span> Claude Code</h4>
                        <p>Use for project scaffolding, complex logic, and backend work:</p>
                        <ul>
                            <li>Project initialization and config</li>
                            <li>Embedding pipeline logic</li>
                            <li>Vector search SQL queries</li>
                            <li>API route implementations</li>
                        </ul>
                    </div>
                    <div class="ai-tool-card">
                        <h4><span>üé®</span> v0.dev</h4>
                        <p>Use for rapid UI component generation:</p>
                        <ul>
                            <li>Product card components</li>
                            <li>Recommendation carousel</li>
                            <li>Loading skeletons</li>
                            <li>Responsive layouts</li>
                        </ul>
                    </div>
                    <div class="ai-tool-card">
                        <h4><span>‚ö°</span> Cursor</h4>
                        <p>Use for debugging and optimization:</p>
                        <ul>
                            <li>Debugging vector queries</li>
                            <li>Performance optimization</li>
                            <li>Code refactoring</li>
                            <li>Adding TypeScript types</li>
                        </ul>
                    </div>
                </div>

                <h3 id="ai-scaffolding">Project Scaffolding with Claude Code</h3>
                <p>Start by asking Claude Code to scaffold your project with the correct dependencies and configuration. This saves significant setup time and ensures best practices from the start.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Prompt</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="comment"># Example prompt for Claude Code</span>

Create a Next.js 14 project with TypeScript for an e-commerce
product recommendation engine. Include:

1. Supabase client setup with types
2. OpenAI client for embeddings
3. Anthropic client for Claude
4. A products table schema with pgvector embedding column
5. API routes for:
   - POST /api/embeddings/generate (batch embed products)
   - GET /api/recommendations/[productId] (get similar products)
6. Environment variable validation with zod

Use the App Router and server components where possible.</code></pre>
                </div>

                <h3 id="ai-ui">UI Generation with v0.dev</h3>
                <p>For the visual components, v0.dev excels at generating polished UI quickly. Use it for the product display components that need to look professional without spending hours on CSS.</p>

                <div class="callout callout-tip">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>
                        Pro Tip
                    </div>
                    <p>When prompting v0.dev, specify "dark mode compatible" and "use Tailwind CSS" to get components that integrate seamlessly with your Next.js setup. Also include "include loading states" to get skeleton components automatically.</p>
                </div>

                <h3 id="ai-debugging">Development with Cursor</h3>
                <p>Cursor shines when you need to debug complex queries or optimize performance. Its inline code generation and ability to understand your entire codebase make it perfect for the integration work between your embedding pipeline and search functionality.</p>

                <!-- Section: Build Steps -->
                <h2 id="build-steps">Step-by-Step Build Guide</h2>

                <h3 id="phase-1">Phase 1: Project Setup</h3>
                <div class="phase-indicator">
                    <span class="phase-number">1</span>
                    <span class="phase-title">Project Setup</span>
                    <span class="phase-time">~30 minutes</span>
                </div>

                <p>Initialize your Next.js project and install the required dependencies. We're using the App Router for better server component support.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">bash</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="comment"># Create Next.js project</span>
npx create-next-app@latest ecommerce-recommender --typescript --tailwind --app --src-dir

<span class="keyword">cd</span> ecommerce-recommender

<span class="comment"># Install dependencies</span>
npm install @supabase/supabase-js openai @anthropic-ai/sdk zod

<span class="comment"># Install dev dependencies</span>
npm install -D @types/node</code></pre>
                </div>

                <p>Create your environment variables file with the required API keys:</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">.env.local</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="comment"># Supabase</span>
<span class="variable">NEXT_PUBLIC_SUPABASE_URL</span>=<span class="string">your-project-url</span>
<span class="variable">NEXT_PUBLIC_SUPABASE_ANON_KEY</span>=<span class="string">your-anon-key</span>
<span class="variable">SUPABASE_SERVICE_ROLE_KEY</span>=<span class="string">your-service-role-key</span>

<span class="comment"># OpenAI</span>
<span class="variable">OPENAI_API_KEY</span>=<span class="string">sk-...</span>

<span class="comment"># Anthropic</span>
<span class="variable">ANTHROPIC_API_KEY</span>=<span class="string">sk-ant-...</span></code></pre>
                </div>

                <h3 id="phase-2">Phase 2: Database Schema with pgvector</h3>
                <div class="phase-indicator">
                    <span class="phase-number">2</span>
                    <span class="phase-title">Product Database Schema</span>
                    <span class="phase-time">~30 minutes</span>
                </div>

                <p>Set up your Supabase database with the pgvector extension for vector similarity search. Run this SQL in your Supabase SQL editor:</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">sql</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="comment">-- Enable the pgvector extension</span>
<span class="keyword">CREATE EXTENSION IF NOT EXISTS</span> vector;

<span class="comment">-- Create products table with embedding column</span>
<span class="keyword">CREATE TABLE</span> products (
  id <span class="type">UUID</span> <span class="keyword">PRIMARY KEY DEFAULT</span> gen_random_uuid(),
  name <span class="type">TEXT</span> <span class="keyword">NOT NULL</span>,
  description <span class="type">TEXT</span> <span class="keyword">NOT NULL</span>,
  price <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>) <span class="keyword">NOT NULL</span>,
  category <span class="type">TEXT</span> <span class="keyword">NOT NULL</span>,
  image_url <span class="type">TEXT</span>,
  embedding <span class="type">vector</span>(<span class="number">1536</span>), <span class="comment">-- OpenAI embedding dimension</span>
  created_at <span class="type">TIMESTAMPTZ</span> <span class="keyword">DEFAULT</span> now(),
  updated_at <span class="type">TIMESTAMPTZ</span> <span class="keyword">DEFAULT</span> now()
);

<span class="comment">-- Create index for fast similarity search</span>
<span class="keyword">CREATE INDEX</span> products_embedding_idx
<span class="keyword">ON</span> products
<span class="keyword">USING</span> ivfflat (embedding vector_cosine_ops)
<span class="keyword">WITH</span> (lists = <span class="number">100</span>);

<span class="comment">-- Function to search similar products</span>
<span class="keyword">CREATE OR REPLACE FUNCTION</span> match_products(
  query_embedding <span class="type">vector</span>(<span class="number">1536</span>),
  match_count <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">5</span>,
  match_threshold <span class="type">FLOAT</span> <span class="keyword">DEFAULT</span> <span class="number">0.7</span>
)
<span class="keyword">RETURNS TABLE</span> (
  id <span class="type">UUID</span>,
  name <span class="type">TEXT</span>,
  description <span class="type">TEXT</span>,
  price <span class="type">DECIMAL</span>,
  category <span class="type">TEXT</span>,
  image_url <span class="type">TEXT</span>,
  similarity <span class="type">FLOAT</span>
)
<span class="keyword">LANGUAGE</span> plpgsql
<span class="keyword">AS</span> $$
<span class="keyword">BEGIN</span>
  <span class="keyword">RETURN QUERY</span>
  <span class="keyword">SELECT</span>
    p.id,
    p.name,
    p.description,
    p.price,
    p.category,
    p.image_url,
    <span class="number">1</span> - (p.embedding <=> query_embedding) <span class="keyword">AS</span> similarity
  <span class="keyword">FROM</span> products p
  <span class="keyword">WHERE</span> <span class="number">1</span> - (p.embedding <=> query_embedding) > match_threshold
  <span class="keyword">ORDER BY</span> p.embedding <=> query_embedding
  <span class="keyword">LIMIT</span> match_count;
<span class="keyword">END</span>;
$$;</code></pre>
                </div>

                <div class="callout callout-warning">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        IVFFlat Index Note
                    </div>
                    <p>The IVFFlat index requires at least 100 rows to build properly. For development with fewer products, you can skip the index creation or use HNSW instead: <code>USING hnsw (embedding vector_cosine_ops)</code></p>
                </div>

                <h3 id="phase-3">Phase 3: Embedding Generation</h3>
                <div class="phase-indicator">
                    <span class="phase-number">3</span>
                    <span class="phase-title">Embedding Generation Pipeline</span>
                    <span class="phase-time">~45 minutes</span>
                </div>

                <p>Create the embedding service that converts product descriptions into vectors. This is the core of the recommendation engine.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">src/lib/embeddings.ts</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="keyword">import</span> OpenAI <span class="keyword">from</span> <span class="string">'openai'</span>;
<span class="keyword">import</span> { createClient } <span class="keyword">from</span> <span class="string">'@supabase/supabase-js'</span>;

<span class="keyword">const</span> openai = <span class="keyword">new</span> <span class="function">OpenAI</span>({
  apiKey: process.env.<span class="variable">OPENAI_API_KEY</span>,
});

<span class="keyword">const</span> supabase = <span class="function">createClient</span>(
  process.env.<span class="variable">NEXT_PUBLIC_SUPABASE_URL</span>!,
  process.env.<span class="variable">SUPABASE_SERVICE_ROLE_KEY</span>!
);

<span class="keyword">interface</span> <span class="type">Product</span> {
  id: <span class="type">string</span>;
  name: <span class="type">string</span>;
  description: <span class="type">string</span>;
  category: <span class="type">string</span>;
}

<span class="comment">/**
 * Generate embedding for a single product
 * Combines name, description, and category for richer semantics
 */</span>
<span class="keyword">export async function</span> <span class="function">generateEmbedding</span>(product: <span class="type">Product</span>): <span class="type">Promise</span><<span class="type">number</span>[]> {
  <span class="keyword">const</span> textToEmbed = <span class="string">`</span>
<span class="string">    Product: ${product.name}</span>
<span class="string">    Category: ${product.category}</span>
<span class="string">    Description: ${product.description}</span>
<span class="string">  `</span>.<span class="function">trim</span>();

  <span class="keyword">const</span> response = <span class="keyword">await</span> openai.embeddings.<span class="function">create</span>({
    model: <span class="string">'text-embedding-3-small'</span>,
    input: textToEmbed,
  });

  <span class="keyword">return</span> response.data[<span class="number">0</span>].embedding;
}

<span class="comment">/**
 * Batch generate embeddings for multiple products
 * Includes rate limiting and error handling
 */</span>
<span class="keyword">export async function</span> <span class="function">batchGenerateEmbeddings</span>(
  products: <span class="type">Product</span>[],
  batchSize = <span class="number">100</span>
): <span class="type">Promise</span><{ success: <span class="type">number</span>; failed: <span class="type">string</span>[] }> {
  <span class="keyword">const</span> failed: <span class="type">string</span>[] = [];
  <span class="keyword">let</span> success = <span class="number">0</span>;

  <span class="comment">// Process in batches to avoid rate limits</span>
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i < products.length; i += batchSize) {
    <span class="keyword">const</span> batch = products.<span class="function">slice</span>(i, i + batchSize);

    <span class="keyword">const</span> embedPromises = batch.<span class="function">map</span>(<span class="keyword">async</span> (product) => {
      <span class="keyword">try</span> {
        <span class="keyword">const</span> embedding = <span class="keyword">await</span> <span class="function">generateEmbedding</span>(product);

        <span class="comment">// Update product with embedding</span>
        <span class="keyword">const</span> { error } = <span class="keyword">await</span> supabase
          .<span class="function">from</span>(<span class="string">'products'</span>)
          .<span class="function">update</span>({ embedding })
          .<span class="function">eq</span>(<span class="string">'id'</span>, product.id);

        <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;
        <span class="keyword">return</span> <span class="keyword">true</span>;
      } <span class="keyword">catch</span> (err) {
        failed.<span class="function">push</span>(product.id);
        <span class="keyword">return</span> <span class="keyword">false</span>;
      }
    });

    <span class="keyword">const</span> results = <span class="keyword">await</span> <span class="type">Promise</span>.<span class="function">all</span>(embedPromises);
    success += results.<span class="function">filter</span>(<span class="type">Boolean</span>).length;

    <span class="comment">// Rate limiting: wait between batches</span>
    <span class="keyword">if</span> (i + batchSize < products.length) {
      <span class="keyword">await</span> <span class="keyword">new</span> <span class="type">Promise</span>(resolve => <span class="function">setTimeout</span>(resolve, <span class="number">1000</span>));
    }
  }

  <span class="keyword">return</span> { success, failed };
}</code></pre>
                </div>

                <h3 id="phase-4">Phase 4: Similarity Search</h3>
                <div class="phase-indicator">
                    <span class="phase-number">4</span>
                    <span class="phase-title">Vector Search for Recommendations</span>
                    <span class="phase-time">~45 minutes</span>
                </div>

                <p>Build the API route that performs vector similarity search to find related products. This uses the pgvector function we created earlier.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">src/app/api/recommendations/[productId]/route.ts</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="keyword">import</span> { NextRequest, NextResponse } <span class="keyword">from</span> <span class="string">'next/server'</span>;
<span class="keyword">import</span> { createClient } <span class="keyword">from</span> <span class="string">'@supabase/supabase-js'</span>;

<span class="keyword">const</span> supabase = <span class="function">createClient</span>(
  process.env.<span class="variable">NEXT_PUBLIC_SUPABASE_URL</span>!,
  process.env.<span class="variable">SUPABASE_SERVICE_ROLE_KEY</span>!
);

<span class="keyword">export async function</span> <span class="function">GET</span>(
  request: <span class="type">NextRequest</span>,
  { params }: { params: { productId: <span class="type">string</span> } }
) {
  <span class="keyword">const</span> { productId } = params;
  <span class="keyword">const</span> limit = <span class="function">parseInt</span>(
    request.nextUrl.searchParams.<span class="function">get</span>(<span class="string">'limit'</span>) || <span class="string">'5'</span>
  );

  <span class="keyword">try</span> {
    <span class="comment">// Get the source product's embedding</span>
    <span class="keyword">const</span> { data: product, error: productError } = <span class="keyword">await</span> supabase
      .<span class="function">from</span>(<span class="string">'products'</span>)
      .<span class="function">select</span>(<span class="string">'embedding'</span>)
      .<span class="function">eq</span>(<span class="string">'id'</span>, productId)
      .<span class="function">single</span>();

    <span class="keyword">if</span> (productError || !product?.embedding) {
      <span class="keyword">return</span> NextResponse.<span class="function">json</span>(
        { error: <span class="string">'Product not found or has no embedding'</span> },
        { status: <span class="number">404</span> }
      );
    }

    <span class="comment">// Find similar products using pgvector</span>
    <span class="keyword">const</span> { data: recommendations, error: searchError } = <span class="keyword">await</span> supabase
      .<span class="function">rpc</span>(<span class="string">'match_products'</span>, {
        query_embedding: product.embedding,
        match_count: limit + <span class="number">1</span>, <span class="comment">// +1 to exclude self</span>
        match_threshold: <span class="number">0.5</span>,
      });

    <span class="keyword">if</span> (searchError) {
      <span class="keyword">throw</span> searchError;
    }

    <span class="comment">// Filter out the source product</span>
    <span class="keyword">const</span> filtered = recommendations
      .<span class="function">filter</span>((p: <span class="keyword">any</span>) => p.id !== productId)
      .<span class="function">slice</span>(<span class="number">0</span>, limit);

    <span class="keyword">return</span> NextResponse.<span class="function">json</span>({
      recommendations: filtered,
      count: filtered.length,
    });
  } <span class="keyword">catch</span> (error) {
    console.<span class="function">error</span>(<span class="string">'Recommendation error:'</span>, error);
    <span class="keyword">return</span> NextResponse.<span class="function">json</span>(
      { error: <span class="string">'Failed to get recommendations'</span> },
      { status: <span class="number">500</span> }
    );
  }
}</code></pre>
                </div>

                <h3 id="phase-5">Phase 5: AI-Powered Descriptions</h3>
                <div class="phase-indicator">
                    <span class="phase-number">5</span>
                    <span class="phase-title">Claude-Generated Descriptions</span>
                    <span class="phase-time">~45 minutes</span>
                </div>

                <p>Use Claude to generate personalized recommendation descriptions that explain <em>why</em> products are related, making recommendations feel more natural and helpful.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">src/lib/ai-descriptions.ts</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="keyword">import</span> Anthropic <span class="keyword">from</span> <span class="string">'@anthropic-ai/sdk'</span>;

<span class="keyword">const</span> anthropic = <span class="keyword">new</span> <span class="function">Anthropic</span>({
  apiKey: process.env.<span class="variable">ANTHROPIC_API_KEY</span>,
});

<span class="keyword">interface</span> <span class="type">Product</span> {
  name: <span class="type">string</span>;
  description: <span class="type">string</span>;
  category: <span class="type">string</span>;
  price: <span class="type">number</span>;
}

<span class="keyword">interface</span> <span class="type">RecommendationWithReason</span> {
  product: <span class="type">Product</span>;
  reason: <span class="type">string</span>;
}

<span class="comment">/**
 * Generate personalized recommendation descriptions using Claude
 */</span>
<span class="keyword">export async function</span> <span class="function">generateRecommendationReasons</span>(
  sourceProduct: <span class="type">Product</span>,
  recommendations: <span class="type">Product</span>[]
): <span class="type">Promise</span><<span class="type">RecommendationWithReason</span>[]> {
  <span class="keyword">const</span> productList = recommendations
    .<span class="function">map</span>((p, i) => <span class="string">`${i + 1}. ${p.name} (${p.category}) - ${p.description}`</span>)
    .<span class="function">join</span>(<span class="string">'\n'</span>);

  <span class="keyword">const</span> response = <span class="keyword">await</span> anthropic.messages.<span class="function">create</span>({
    model: <span class="string">'claude-3-5-sonnet-20241022'</span>,
    max_tokens: <span class="number">1024</span>,
    messages: [
      {
        role: <span class="string">'user'</span>,
        content: <span class="string">`A customer is viewing: "${sourceProduct.name}"
(${sourceProduct.category}) - ${sourceProduct.description}

Based on this, we're recommending these products:
${productList}

For each recommended product, write a brief, friendly reason (1 sentence,
max 15 words) explaining why it pairs well with the viewed product.
Focus on complementary use cases, style matching, or bundle value.

Format your response as JSON array:
[{"index": 1, "reason": "..."}, {"index": 2, "reason": "..."}, ...]`</span>,
      },
    ],
  });

  <span class="comment">// Parse Claude's response</span>
  <span class="keyword">const</span> textContent = response.content[<span class="number">0</span>];
  <span class="keyword">if</span> (textContent.type !== <span class="string">'text'</span>) {
    <span class="keyword">throw new</span> <span class="type">Error</span>(<span class="string">'Unexpected response type'</span>);
  }

  <span class="keyword">const</span> reasons = <span class="type">JSON</span>.<span class="function">parse</span>(textContent.text);

  <span class="keyword">return</span> recommendations.<span class="function">map</span>((product, i) => ({
    product,
    reason: reasons.<span class="function">find</span>((r: <span class="keyword">any</span>) => r.index === i + <span class="number">1</span>)?.reason ||
            <span class="string">'You might also like this'</span>,
  }));
}</code></pre>
                </div>

                <h3 id="phase-6">Phase 6: UI Components</h3>
                <div class="phase-indicator">
                    <span class="phase-number">6</span>
                    <span class="phase-title">Product Grid and Carousel</span>
                    <span class="phase-time">~45 minutes</span>
                </div>

                <p>Build the frontend components to display recommendations. Use v0.dev to generate the initial components, then customize them for your needs.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">src/components/RecommendationCarousel.tsx</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="string">'use client'</span>;

<span class="keyword">import</span> { useEffect, useState } <span class="keyword">from</span> <span class="string">'react'</span>;
<span class="keyword">import</span> { ProductCard } <span class="keyword">from</span> <span class="string">'./ProductCard'</span>;

<span class="keyword">interface</span> <span class="type">Product</span> {
  id: <span class="type">string</span>;
  name: <span class="type">string</span>;
  description: <span class="type">string</span>;
  price: <span class="type">number</span>;
  image_url: <span class="type">string</span>;
  similarity: <span class="type">number</span>;
  reason?: <span class="type">string</span>;
}

<span class="keyword">interface</span> <span class="type">Props</span> {
  productId: <span class="type">string</span>;
  title?: <span class="type">string</span>;
}

<span class="keyword">export function</span> <span class="function">RecommendationCarousel</span>({ productId, title = <span class="string">'You might also like'</span> }: <span class="type">Props</span>) {
  <span class="keyword">const</span> [recommendations, setRecommendations] = <span class="function">useState</span><<span class="type">Product</span>[]>([]);
  <span class="keyword">const</span> [loading, setLoading] = <span class="function">useState</span>(<span class="keyword">true</span>);
  <span class="keyword">const</span> [error, setError] = <span class="function">useState</span><<span class="type">string</span> | <span class="keyword">null</span>>(<span class="keyword">null</span>);

  <span class="function">useEffect</span>(() => {
    <span class="keyword">async function</span> <span class="function">fetchRecommendations</span>() {
      <span class="keyword">try</span> {
        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="function">fetch</span>(<span class="string">`/api/recommendations/${productId}?limit=6`</span>);
        <span class="keyword">if</span> (!res.ok) <span class="keyword">throw new</span> <span class="type">Error</span>(<span class="string">'Failed to fetch'</span>);

        <span class="keyword">const</span> data = <span class="keyword">await</span> res.<span class="function">json</span>();
        <span class="function">setRecommendations</span>(data.recommendations);
      } <span class="keyword">catch</span> (err) {
        <span class="function">setError</span>(<span class="string">'Failed to load recommendations'</span>);
      } <span class="keyword">finally</span> {
        <span class="function">setLoading</span>(<span class="keyword">false</span>);
      }
    }

    <span class="function">fetchRecommendations</span>();
  }, [productId]);

  <span class="keyword">if</span> (loading) {
    <span class="keyword">return</span> (
      <<span class="property">div</span> className=<span class="string">"py-8"</span>>
        <<span class="property">h2</span> className=<span class="string">"text-2xl font-bold mb-6"</span>>{title}</<span class="property">h2</span>>
        <<span class="property">div</span> className=<span class="string">"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"</span>>
          {[...<span class="function">Array</span>(<span class="number">6</span>)].<span class="function">map</span>((_, i) => (
            <<span class="property">div</span> key={i} className=<span class="string">"animate-pulse"</span>>
              <<span class="property">div</span> className=<span class="string">"bg-gray-700 aspect-square rounded-lg"</span> />
              <<span class="property">div</span> className=<span class="string">"h-4 bg-gray-700 rounded mt-3 w-3/4"</span> />
              <<span class="property">div</span> className=<span class="string">"h-4 bg-gray-700 rounded mt-2 w-1/2"</span> />
            </<span class="property">div</span>>
          ))}
        </<span class="property">div</span>>
      </<span class="property">div</span>>
    );
  }

  <span class="keyword">if</span> (error || recommendations.length === <span class="number">0</span>) {
    <span class="keyword">return null</span>;
  }

  <span class="keyword">return</span> (
    <<span class="property">section</span> className=<span class="string">"py-8"</span>>
      <<span class="property">h2</span> className=<span class="string">"text-2xl font-bold mb-6"</span>>{title}</<span class="property">h2</span>>
      <<span class="property">div</span> className=<span class="string">"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"</span>>
        {recommendations.<span class="function">map</span>((product) => (
          <<span class="property">ProductCard</span>
            key={product.id}
            product={product}
            showSimilarity
          />
        ))}
      </<span class="property">div</span>>
    </<span class="property">section</span>>
  );
}</code></pre>
                </div>

                <!-- Section: Common Issues -->
                <h2 id="common-issues">Common Issues & Solutions</h2>
                <p>Here are the most common issues you might encounter and how to solve them:</p>

                <div class="callout callout-warning">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        Vector Dimension Mismatch
                    </div>
                    <p>If you see "expected 1536 dimensions but got X", ensure you're using <code>text-embedding-3-small</code> which outputs 1536 dimensions. Other models have different sizes (e.g., ada-002 is also 1536, but text-embedding-3-large is 3072).</p>
                </div>

                <div class="callout callout-warning">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        Slow Search Performance
                    </div>
                    <p>If vector searches are slow, ensure your IVFFlat index is built (requires 100+ rows). For smaller datasets in development, use HNSW indexing instead or remove the index entirely.</p>
                </div>

                <div class="callout callout-warning">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        Rate Limiting on Embedding Generation
                    </div>
                    <p>OpenAI has rate limits on embeddings API. Implement exponential backoff and batch your requests (max ~100 per batch with delays between batches).</p>
                </div>

                <p>Other tips for debugging:</p>
                <ul>
                    <li><strong>Empty recommendations:</strong> Check that your <code>match_threshold</code> isn't too high. Start with 0.3 and increase gradually.</li>
                    <li><strong>Claude JSON parsing errors:</strong> Add retry logic with temperature variation. Sometimes Claude needs a second attempt.</li>
                    <li><strong>Supabase connection issues:</strong> Verify your service role key has permissions and isn't the anon key.</li>
                </ul>

                <!-- Section: Next Steps -->
                <h2 id="next-steps">Next Steps</h2>
                <p>Congratulations! You now have a working AI-powered recommendation engine. Here are some ways to extend and improve it:</p>

                <ul>
                    <li><strong>Add user behavior tracking:</strong> Incorporate click-through rates and purchase history to improve recommendations over time</li>
                    <li><strong>Implement caching:</strong> Cache embeddings and popular recommendation queries with Redis to reduce API costs and latency</li>
                    <li><strong>A/B test Claude prompts:</strong> Experiment with different prompt styles for recommendation reasons to optimize click-through rates</li>
                    <li><strong>Add category filtering:</strong> Allow users to filter recommendations by category while maintaining semantic relevance</li>
                    <li><strong>Build a feedback loop:</strong> Let users rate recommendations and use that data to fine-tune similarity thresholds</li>
                </ul>

                <div class="callout callout-tip">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>
                        Production Tip
                    </div>
                    <p>For production deployments, consider using Supabase Edge Functions to run the embedding generation closer to the database, reducing latency and improving reliability.</p>
                </div>

                <!-- Share Section -->
                <div class="share-section">
                    <span class="share-label">Share this guide:</span>
                    <div class="share-buttons" role="group" aria-label="Share this guide">
                        <button class="share-btn" data-share="twitter" title="Share on Twitter" aria-label="Share on Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </button>
                        <button class="share-btn" data-share="linkedin" title="Share on LinkedIn" aria-label="Share on LinkedIn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                        </button>
                        <button class="share-btn" data-share="copy" title="Copy link" aria-label="Copy link to clipboard">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                            </svg>
                        </button>
                        <button class="share-btn" data-share="email" title="Share via email" aria-label="Share via email">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Related Guides -->
                <div class="related-guides">
                    <h3 class="related-guides-title">Related Guides</h3>
                    <div class="related-guides-grid">
                        <a href="/guides/fintech-ai-dashboard.html" class="related-guide-card">
                            <h4>FinTech AI Dashboard</h4>
                            <p>Build financial analytics with natural language queries</p>
                        </a>
                        <a href="/guides/healthtech-patient-portal.html" class="related-guide-card">
                            <h4>HealthTech Patient Portal</h4>
                            <p>AI-powered symptom checker and appointment scheduling</p>
                        </a>
                        <a href="/guides/" class="related-guide-card">
                            <h4>View All Guides</h4>
                            <p>Explore our complete collection of AI build guides</p>
                        </a>
                    </div>
                </div>

                <!-- Follow Section -->
                <div class="follow-section">
                    <h3>Follow the Vibe Coding Enthusiast</h3>
                    <p>Follow JD ‚Äî product updates on LinkedIn, personal takes on X.</p>
                    <div class="social-follow-buttons">
                        <a href="https://www.linkedin.com/in/jeremiahddavid/" target="_blank" rel="noopener noreferrer" class="social-follow-btn linkedin">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                            Follow on LinkedIn
                        </a>
                        <a href="https://x.com/jeremiahddavid" target="_blank" rel="noopener noreferrer" class="social-follow-btn twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                            Follow on X
                        </a>
                    </div>
                </div>
            </article>
        </div>
    </main>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M18 15l-6-6-6 6"/>
        </svg>
    </button>

        <footer class="footer">
    <div class="container">
        <div class="footer-simple">
            <div class="footer-brand">
                <a href="/" class="footer-logo">
                    <img src="/favicon.png" alt="Vibe Coding Enthusiast" class="logo-icon" width="28" height="28">
                    <span>Vibe Coding Enthusiast</span>
                </a>
                <p>Free guides for building with AI</p>
            </div>

            <nav class="footer-nav">
                <a href="/guides/">Guides</a>
                <span class="footer-dot">¬∑</span>
                <a href="/paths/">Paths</a>
                <span class="footer-dot">¬∑</span>
                <a href="/learn/">Learn</a>
                <span class="footer-dot">¬∑</span>
                <a href="/tools/">Tools</a>
                <span class="footer-dot">¬∑</span>
                <a href="/stacks/">Stacks</a>
                <span class="footer-dot">¬∑</span>
                <a href="/#about">About</a>
            </nav>

            <div class="footer-social">
                <a href="https://www.linkedin.com/in/jeremiahddavid/" target="_blank" rel="noopener noreferrer" aria-label="Follow on LinkedIn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                </a>
                <a href="https://x.com/jeremiahddavid" target="_blank" rel="noopener noreferrer" aria-label="Follow on X">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            <p>¬© 2025 Vibe Coding Enthusiast</p>
            <div class="footer-legal">
                <a href="/privacy.html">Privacy</a>
                <a href="/terms.html">Terms</a>
            </div>
        </div>
    </div>
</footer>

    <script src="/script.js"></script>

    <!-- Guide-Specific JavaScript -->
    <script>
        // Reading Progress Bar
        (function() {
            const progressBar = document.getElementById('readingProgress');
            const article = document.querySelector('.article-content');

            if (progressBar && article) {
                window.addEventListener('scroll', function() {
                    const articleTop = article.offsetTop;
                    const articleHeight = article.offsetHeight;
                    const windowHeight = window.innerHeight;
                    const scrollTop = window.scrollY;

                    const progress = Math.min(100, Math.max(0,
                        ((scrollTop - articleTop + windowHeight * 0.3) / articleHeight) * 100
                    ));

                    progressBar.style.width = progress + '%';
                    progressBar.setAttribute('aria-valuenow', Math.round(progress));
                });
            }
        })();

        // Generate Table of Contents
        (function() {
            const article = document.querySelector('.article-content');
            const tocList = document.getElementById('tocList');

            if (article && tocList) {
                const headings = article.querySelectorAll('h2, h3');
                let tocHTML = '';

                headings.forEach(function(heading) {
                    const id = heading.getAttribute('id');
                    const text = heading.textContent.replace(/#/g, '').trim();
                    const level = heading.tagName.toLowerCase();
                    const className = level === 'h3' ? 'toc-h3' : '';

                    if (id) {
                        tocHTML += '<li><a href="#' + id + '" class="' + className + '">' + text + '</a></li>';

                        // Add anchor link to heading
                        const anchor = document.createElement('a');
                        anchor.href = '#' + id;
                        anchor.className = 'anchor-link';
                        anchor.setAttribute('aria-label', 'Link to ' + text);
                        anchor.textContent = '#';
                        heading.appendChild(anchor);
                    }
                });

                tocList.innerHTML = tocHTML;

                // Highlight active TOC item on scroll
                const tocLinks = tocList.querySelectorAll('a');

                function updateActiveTOC() {
                    const scrollPos = window.scrollY + 120;

                    headings.forEach(function(heading, index) {
                        const id = heading.getAttribute('id');
                        const headingTop = heading.offsetTop;
                        const nextHeading = headings[index + 1];
                        const nextTop = nextHeading ? nextHeading.offsetTop : document.body.scrollHeight;

                        if (scrollPos >= headingTop && scrollPos < nextTop) {
                            tocLinks.forEach(function(link) {
                                link.classList.remove('active');
                                if (link.getAttribute('href') === '#' + id) {
                                    link.classList.add('active');
                                }
                            });
                        }
                    });
                }

                window.addEventListener('scroll', updateActiveTOC);
                updateActiveTOC();
            }
        })();

        // Copy Code Button
        (function() {
            const copyButtons = document.querySelectorAll('.code-copy-btn');

            copyButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    const codeBlock = this.closest('.code-block');
                    const code = codeBlock.querySelector('code');
                    const text = code.textContent;

                    navigator.clipboard.writeText(text).then(function() {
                        button.textContent = 'Copied!';
                        button.classList.add('copied');

                        setTimeout(function() {
                            button.textContent = 'Copy';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(function(err) {
                        console.error('Failed to copy:', err);
                    });
                });
            });
        })();

        // Share Buttons
        (function() {
            const shareButtons = document.querySelectorAll('.share-btn');
            const pageTitle = document.title;
            const pageUrl = window.location.href;

            shareButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    const shareType = this.getAttribute('data-share');
                    let shareUrl = '';

                    switch(shareType) {
                        case 'twitter':
                            shareUrl = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(pageTitle) + '&url=' + encodeURIComponent(pageUrl);
                            window.open(shareUrl, '_blank', 'width=550,height=420');
                            break;
                        case 'linkedin':
                            shareUrl = 'https://www.linkedin.com/sharing/share-offsite/?url=' + encodeURIComponent(pageUrl);
                            window.open(shareUrl, '_blank', 'width=550,height=420');
                            break;
                        case 'copy':
                            navigator.clipboard.writeText(pageUrl).then(function() {
                                const originalTitle = button.getAttribute('title');
                                button.setAttribute('title', 'Link copied!');
                                setTimeout(function() {
                                    button.setAttribute('title', originalTitle);
                                }, 2000);
                            });
                            break;
                        case 'email':
                            shareUrl = 'mailto:?subject=' + encodeURIComponent(pageTitle) + '&body=' + encodeURIComponent('Check out this guide: ' + pageUrl);
                            window.location.href = shareUrl;
                            break;
                    }
                });
            });
        })();
    </script>
</body>
</html>
