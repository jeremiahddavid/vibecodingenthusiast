<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Primary Meta Tags -->
    <title>Build an AI-Powered Patient Portal | AI Build Guides | Vibe Coding Enthusiast</title>
    <meta name="title" content="Build an AI-Powered Patient Portal | AI Build Guides | Vibe Coding Enthusiast">
    <meta name="description" content="Learn to build a secure patient portal with AI symptom checker, appointment booking, and encrypted health records using Next.js, Supabase, and Claude API.">
    <meta name="keywords" content="patient portal, AI symptom checker, healthcare app, HIPAA, Next.js, Supabase, Claude API, ai development, vibe coding, build guide, tutorial">
    <meta name="author" content="Vibe Coding Enthusiast">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://vibecodingenthusiast.com/guides/healthtech-patient-portal.html">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://vibecodingenthusiast.com/guides/healthtech-patient-portal.html">
    <meta property="og:title" content="Build an AI-Powered Patient Portal | AI Build Guides">
    <meta property="og:description" content="Learn to build a secure patient portal with AI symptom checker, appointment booking, and encrypted health records using Next.js, Supabase, and Claude API.">
    <meta property="og:image" content="https://vibecodingenthusiast.com/guides/images/healthtech-patient-portal-og.png">
    <meta property="og:site_name" content="Vibe Coding Enthusiast">
    <meta property="og:locale" content="en_US">
    <meta property="article:published_time" content="2025-01-14">
    <meta property="article:modified_time" content="2025-01-14">
    <meta property="article:author" content="Vibe Coding Enthusiast">
    <meta property="article:section" content="AI Build Guides">
    <meta property="article:tag" content="HealthTech">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://vibecodingenthusiast.com/guides/healthtech-patient-portal.html">
    <meta name="twitter:title" content="Build an AI-Powered Patient Portal | AI Build Guides">
    <meta name="twitter:description" content="Learn to build a secure patient portal with AI symptom checker, appointment booking, and encrypted health records using Next.js, Supabase, and Claude API.">
    <meta name="twitter:image" content="https://vibecodingenthusiast.com/guides/images/healthtech-patient-portal-og.png">
    <meta name="twitter:creator" content="@vibecodingenthusiast">

    <!-- Schema.org JSON-LD for TechArticle -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "TechArticle",
        "headline": "Build an AI-Powered Patient Portal",
        "description": "Learn to build a secure patient portal with AI symptom checker, appointment booking, and encrypted health records using Next.js, Supabase, and Claude API.",
        "image": "https://vibecodingenthusiast.com/guides/images/healthtech-patient-portal-og.png",
        "author": {
            "@type": "Organization",
            "name": "Vibe Coding Enthusiast",
            "url": "https://vibecodingenthusiast.com"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Vibe Coding Enthusiast",
            "logo": {
                "@type": "ImageObject",
                "url": "https://vibecodingenthusiast.com/favicon.png"
            }
        },
        "datePublished": "2025-01-14",
        "dateModified": "2025-01-14",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://vibecodingenthusiast.com/guides/healthtech-patient-portal.html"
        },
        "articleSection": "AI Build Guides",
        "keywords": "patient portal, AI symptom checker, healthcare app, HIPAA, Next.js, Supabase, Claude API",
        "proficiencyLevel": "Advanced",
        "dependencies": "Next.js 14, TypeScript, Supabase, Claude API, Cal.com",
        "timeRequired": "PT360M"
    }
    </script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/styles.css">

    <!-- Guide-Specific Styles -->
    <style>
        /* Reading Progress Bar */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-green));
            z-index: 1001;
            transition: width 0.1s ease-out;
        }

        /* Article Header */
        .article-header {
            padding: 140px 0 60px;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, transparent 50%);
            position: relative;
            overflow: hidden;
        }
        .article-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(239, 68, 68, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
        }

        /* Breadcrumb */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-bottom: 24px;
            flex-wrap: wrap;
        }
        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        .breadcrumb a:hover {
            color: var(--accent-primary);
        }
        .breadcrumb-separator {
            color: var(--text-muted);
        }
        .breadcrumb-current {
            color: var(--text-primary);
        }

        /* Guide Meta Badges */
        .guide-meta {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .badge-beginner {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        .badge-intermediate {
            background: rgba(245, 158, 11, 0.15);
            color: #f59e0b;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        .badge-advanced {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        .badge-time {
            background: rgba(129, 140, 248, 0.15);
            color: var(--accent-primary);
            border: 1px solid rgba(129, 140, 248, 0.3);
        }
        .badge-time svg {
            width: 14px;
            height: 14px;
        }

        /* Article Title */
        .article-header h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 20px;
            max-width: 900px;
        }
        .article-header .lead {
            font-size: 1.2rem;
            color: var(--text-secondary);
            line-height: 1.7;
            max-width: 700px;
            margin-bottom: 28px;
        }

        /* Share Buttons in Header */
        .share-buttons {
            display: flex;
            gap: 10px;
        }
        .share-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .share-btn:hover {
            background: var(--bg-secondary);
            color: var(--accent-primary);
            border-color: var(--accent-primary);
        }
        .share-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Article Layout - Main Content with Sidebar */
        .article-layout {
            display: grid;
            grid-template-columns: 260px 1fr;
            gap: 60px;
            max-width: 1400px;
            margin: 0 auto;
            padding: clamp(32px, 5vw, 60px) clamp(16px, 4vw, 24px);
        }
        @media (max-width: 1100px) {
            .article-layout {
                grid-template-columns: 1fr;
                gap: 40px;
            }
        }

        /* Table of Contents Sidebar */
        .toc-sidebar {
            position: sticky;
            top: 100px;
            height: fit-content;
            max-height: calc(100vh - 140px);
            overflow-y: auto;
        }
        @media (max-width: 1100px) {
            .toc-sidebar {
                position: static;
                background: var(--bg-card);
                border: 1px solid var(--border-color);
                border-radius: var(--radius-lg);
                padding: 24px;
            }
        }
        .toc-title {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 16px;
        }
        .toc-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .toc-list li {
            margin-bottom: 8px;
        }
        .toc-list a {
            display: block;
            padding: 8px 12px;
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 2px solid transparent;
            transition: all 0.2s ease;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }
        .toc-list a:hover {
            color: var(--text-primary);
            background: rgba(129, 140, 248, 0.08);
        }
        .toc-list a.active {
            color: var(--accent-primary);
            border-left-color: var(--accent-primary);
            background: rgba(129, 140, 248, 0.1);
        }
        .toc-list .toc-h3 {
            padding-left: 24px;
            font-size: 0.8125rem;
        }

        /* Article Content */
        .article-content {
            max-width: 800px;
        }
        .article-content h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-top: 56px;
            margin-bottom: 20px;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
        }
        .article-content h2:first-of-type {
            margin-top: 0;
            padding-top: 0;
            border-top: none;
        }
        .article-content h3 {
            font-size: 1.375rem;
            font-weight: 600;
            margin-top: 40px;
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        .article-content p {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 20px;
        }
        .article-content ul,
        .article-content ol {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 20px;
            padding-left: 24px;
        }
        .article-content li {
            margin-bottom: 8px;
        }

        /* Tech Stack Table */
        .tech-stack-table {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0 32px;
            font-size: 0.9rem;
        }
        .tech-stack-table thead {
            background: var(--bg-secondary);
        }
        .tech-stack-table th {
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border-color);
        }
        .tech-stack-table td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }
        .tech-stack-table tbody tr:hover {
            background: rgba(129, 140, 248, 0.04);
        }

        /* Code Blocks */
        .code-block {
            position: relative;
            margin: 24px 0;
            border-radius: var(--radius-lg);
            overflow: hidden;
            background: #1a1b26;
            border: 1px solid var(--border-color);
        }
        .code-block pre {
            margin: 0;
            padding: 20px 24px;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            line-height: 1.7;
            color: #c0caf5;
        }
        .code-block code {
            font-family: inherit;
        }
        .code-copy-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 6px 12px;
            font-size: 0.75rem;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-sm);
            color: #a9b1d6;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .code-copy-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
        }
        .code-copy-btn.copied {
            background: rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.4);
            color: #10b981;
        }

        /* Code Syntax Highlighting */
        .code-block .keyword { color: #bb9af7; }
        .code-block .string { color: #9ece6a; }
        .code-block .comment { color: #565f89; font-style: italic; }
        .code-block .function { color: #7aa2f7; }
        .code-block .variable { color: #c0caf5; }
        .code-block .property { color: #73daca; }

        /* Callout Boxes */
        .callout {
            padding: 20px 24px;
            border-radius: var(--radius-lg);
            margin: 24px 0;
            border-left: 4px solid;
        }
        .callout-tip {
            background: rgba(16, 185, 129, 0.1);
            border-color: #10b981;
        }
        .callout-tip .callout-title { color: #10b981; }
        .callout-warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: #f59e0b;
        }
        .callout-warning .callout-title { color: #f59e0b; }
        .callout-info {
            background: rgba(129, 140, 248, 0.1);
            border-color: var(--accent-primary);
        }
        .callout-info .callout-title { color: var(--accent-primary); }
        .callout-danger {
            background: rgba(239, 68, 68, 0.1);
            border-color: #ef4444;
        }
        .callout-danger .callout-title { color: #ef4444; }
        .callout-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .callout p {
            margin: 0;
            color: var(--text-secondary);
        }
        .callout ul {
            margin: 8px 0 0 0;
            padding-left: 20px;
        }

        /* Share Section at Bottom */
        .share-section {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
            padding: 32px 0;
            margin-top: 48px;
            border-top: 1px solid var(--border-color);
        }
        .share-label {
            font-weight: 500;
            color: var(--text-secondary);
        }

        /* Related Guides */
        .related-guides {
            margin-top: 64px;
            padding-top: 48px;
            border-top: 1px solid var(--border-color);
        }
        .related-guides-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 24px;
        }
        .related-guides-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
        }
        .related-guide-card {
            display: block;
            padding: 24px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .related-guide-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }
        .related-guide-card h4 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        .related-guide-card p {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin: 0;
            line-height: 1.5;
        }

        /* Newsletter Section */
        .newsletter-section {
            margin-top: 64px;
            padding: 40px;
            background: linear-gradient(135deg, rgba(129, 140, 248, 0.1), rgba(16, 185, 129, 0.05));
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            text-align: center;
        }
        .newsletter-section h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            margin-top: 0;
        }
        .newsletter-section > p {
            color: var(--text-secondary);
            margin-bottom: 24px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        .newsletter-form {
            display: flex;
            gap: 12px;
            max-width: 440px;
            margin: 0 auto;
        }
        .newsletter-form input[type="email"] {
            flex: 1;
            padding: 14px 18px;
            font-size: 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.2s ease;
        }
        .newsletter-form input[type="email"]:focus {
            border-color: var(--accent-primary);
        }
        .newsletter-form input[type="email"]::placeholder {
            color: var(--text-muted);
        }
        .newsletter-form button {
            padding: 14px 28px;
            font-size: 1rem;
            font-weight: 600;
            background: var(--accent-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        .newsletter-form button:hover {
            background: #6366f1;
            transform: translateY(-1px);
        }
        @media (max-width: 520px) {
            .newsletter-form {
                flex-direction: column;
            }
            .newsletter-form button {
                width: 100%;
            }
        }

        /* Image styling */
        .article-content img {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-lg);
            margin: 24px 0;
            border: 1px solid var(--border-color);
        }

        /* Anchor links */
        .article-content h2 .anchor-link,
        .article-content h3 .anchor-link {
            opacity: 0;
            margin-left: 8px;
            color: var(--text-muted);
            text-decoration: none;
            transition: opacity 0.2s ease;
        }
        .article-content h2:hover .anchor-link,
        .article-content h3:hover .anchor-link {
            opacity: 1;
        }
        .article-content h2 .anchor-link:hover,
        .article-content h3 .anchor-link:hover {
            color: var(--accent-primary);
        }

        /* Feature list styling */
        .feature-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }
        .feature-list li {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }
        .feature-list li:last-child {
            border-bottom: none;
        }
        .feature-list .feature-icon {
            width: 24px;
            height: 24px;
            background: rgba(129, 140, 248, 0.15);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 2px;
        }
        .feature-list .feature-icon svg {
            width: 14px;
            height: 14px;
            color: var(--accent-primary);
        }
    </style>
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <!-- Reading Progress Bar -->
    <div class="reading-progress" id="readingProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Reading progress"></div>

    <!-- Header -->
    <header class="header">
        <nav class="nav container" role="navigation" aria-label="Main navigation">
            <a href="/" class="logo" aria-label="Vibe Coding Enthusiast - Home">
                <img src="/favicon.png" alt="Vibe Coding Enthusiast" class="logo-icon" width="28" height="28">
                <span class="logo-text">VibeCoding<span class="accent">Enthusiast</span></span>
            </a>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/guides/">Guides</a></li>
                <li><a href="/paths/">Paths</a></li>
                <li><a href="/learn/">Learn</a></li>
                <li><a href="/tools/">Tools</a></li>
                <li><a href="/stacks/">Stacks</a></li>
                <li><a href="/#about">About</a></li>
            </ul>
            <div class="nav-actions">
                <a href="/guides/" class="btn btn-primary">Explore Guides</a>
            </div>
            <button class="mobile-menu-btn" aria-label="Toggle menu" aria-expanded="false">
                <span></span><span></span><span></span>
            </button>
        </nav>
    </header>

    <main id="main">
        <!-- Article Header -->
        <section class="article-header">
            <div class="container">
                <!-- Breadcrumb Navigation -->
                <nav class="breadcrumb" aria-label="Breadcrumb">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator" aria-hidden="true">/</span>
                    <a href="/guides/">Guides</a>
                    <span class="breadcrumb-separator" aria-hidden="true">/</span>
                    <span class="breadcrumb-current" aria-current="page">AI Patient Portal</span>
                </nav>

                <!-- Guide Meta Badges -->
                <div class="guide-meta">
                    <span class="badge badge-advanced">Advanced</span>
                    <span class="badge badge-time">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        ~6 hours
                    </span>
                </div>

                <!-- Title -->
                <h1 class="gradient-text">Build an AI-Powered Patient Portal</h1>

                <!-- Description -->
                <p class="lead">Create a secure patient portal with AI symptom checking, appointment booking, medical record access, and provider communication - all with modern security practices.</p>

                <!-- Share Buttons -->
                <div class="share-buttons" role="group" aria-label="Share this guide">
                    <button class="share-btn" data-share="twitter" title="Share on Twitter" aria-label="Share on Twitter">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </button>
                    <button class="share-btn" data-share="linkedin" title="Share on LinkedIn" aria-label="Share on LinkedIn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </button>
                    <button class="share-btn" data-share="copy" title="Copy link" aria-label="Copy link to clipboard">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- Main Content with TOC Sidebar -->
        <div class="article-layout">
            <!-- Table of Contents Sidebar -->
            <aside class="toc-sidebar" aria-label="Table of contents">
                <div class="toc-title">On this page</div>
                <ul class="toc-list" id="tocList">
                    <noscript>
                        <li><a href="#overview">What We're Building</a></li>
                        <li><a href="#prerequisites">Prerequisites</a></li>
                        <li><a href="#tech-stack">Tech Stack</a></li>
                        <li><a href="#ai-workflow">AI Agent Workflow</a></li>
                        <li><a href="#build-steps">Build Phases</a></li>
                        <li><a href="#disclaimers">Important Disclaimers</a></li>
                        <li><a href="#code-examples">Code Examples</a></li>
                        <li><a href="#common-issues">Common Issues</a></li>
                        <li><a href="#next-steps">Next Steps</a></li>
                    </noscript>
                </ul>
            </aside>

            <!-- Article Content -->
            <article class="article-content">
                <!-- Section: What We're Building -->
                <h2 id="overview">What We're Building</h2>
                <p>In this comprehensive guide, you will build a secure patient portal where users can check symptoms with AI assistance, book appointments, view medical records, and communicate with healthcare providers. This is a production-grade application that prioritizes security and data protection.</p>

                <p>The portal includes these core features:</p>
                <ul class="feature-list">
                    <li>
                        <span class="feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4"/><circle cx="12" cy="12" r="10"/></svg></span>
                        <span><strong>AI Symptom Checker</strong> - Conversational interface powered by Claude for preliminary symptom guidance</span>
                    </li>
                    <li>
                        <span class="feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></span>
                        <span><strong>Appointment Booking</strong> - Calendar integration with provider availability and reminders</span>
                    </li>
                    <li>
                        <span class="feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg></span>
                        <span><strong>Medical Records Access</strong> - Secure, encrypted storage and retrieval of health information</span>
                    </li>
                    <li>
                        <span class="feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></span>
                        <span><strong>Provider Messaging</strong> - Secure communication channel between patients and healthcare providers</span>
                    </li>
                    <li>
                        <span class="feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></span>
                        <span><strong>MFA Authentication</strong> - Multi-factor authentication for enhanced account security</span>
                    </li>
                </ul>

                <!-- Section: Prerequisites -->
                <h2 id="prerequisites">Prerequisites</h2>
                <p>Before starting this guide, make sure you have the following:</p>
                <ul>
                    <li><strong>Strong knowledge of React/Next.js</strong> - You should be comfortable with React hooks, server components, and Next.js App Router</li>
                    <li><strong>Understanding of authentication and security</strong> - Familiarity with JWT, session management, and secure coding practices</li>
                    <li><strong>Familiarity with healthcare data considerations</strong> - Basic understanding of why health data requires special handling</li>
                    <li><strong>Free account: Supabase</strong> - For database and authentication (<a href="https://supabase.com" target="_blank" rel="noopener">supabase.com</a>)</li>
                    <li><strong>Free account: Vercel</strong> - For deployment (<a href="https://vercel.com" target="_blank" rel="noopener">vercel.com</a>)</li>
                    <li><strong>API access: Anthropic</strong> - For Claude API integration (<a href="https://console.anthropic.com" target="_blank" rel="noopener">console.anthropic.com</a>)</li>
                </ul>

                <!-- Section: Tech Stack -->
                <h2 id="tech-stack">Tech Stack Specification</h2>
                <p>Here is the technology stack we will use for this build, chosen specifically for security and healthcare application requirements:</p>
                <table class="tech-stack-table">
                    <thead>
                        <tr>
                            <th scope="col">Layer</th>
                            <th scope="col">Technology</th>
                            <th scope="col">Why This Choice</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Frontend</td>
                            <td>Next.js 14, TypeScript, Tailwind CSS</td>
                            <td>SSR for security, type safety for data handling</td>
                        </tr>
                        <tr>
                            <td>Backend</td>
                            <td>Node.js with Express</td>
                            <td>More control for health data handling and middleware</td>
                        </tr>
                        <tr>
                            <td>Database</td>
                            <td>Supabase PostgreSQL with encryption</td>
                            <td>Secure, encrypted at rest, row-level security</td>
                        </tr>
                        <tr>
                            <td>AI</td>
                            <td>Claude API (claude-3-sonnet)</td>
                            <td>Better reasoning capabilities for symptom analysis</td>
                        </tr>
                        <tr>
                            <td>Auth</td>
                            <td>Supabase Auth with MFA</td>
                            <td>Enhanced security with multi-factor authentication</td>
                        </tr>
                        <tr>
                            <td>Scheduling</td>
                            <td>Cal.com API or custom</td>
                            <td>Open-source scheduling with flexibility</td>
                        </tr>
                        <tr>
                            <td>Hosting</td>
                            <td>Vercel or Railway</td>
                            <td>Secure hosting with environment variable protection</td>
                        </tr>
                    </tbody>
                </table>

                <!-- Section: AI Agent Workflow -->
                <h2 id="ai-workflow">AI Agent Workflow</h2>
                <p>Here is how to leverage AI tools throughout this build to maximize productivity while maintaining security standards:</p>

                <h3 id="ai-claude-code">Claude Code - Core Development</h3>
                <p>Use Claude Code for setting up secure authentication flows, building the symptom checker logic, creating encrypted data storage patterns, and implementing audit logging. Claude Code excels at understanding security requirements and generating secure-by-default code.</p>

                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment"># Example prompt for Claude Code</span>

Create a Next.js 14 patient portal with:
- Secure authentication using Supabase Auth with MFA
- A symptom checker that uses Claude API to provide preliminary guidance
- Clear disclaimers that this is not medical advice
- Appointment booking functionality
- Encrypted patient notes storage
- Audit logging for all data access

Focus on security best practices:
- Server-side rendering for sensitive pages
- CSRF protection
- Rate limiting on API routes
- Input sanitization for all user inputs</code></pre>
                </div>

                <h3 id="ai-v0">v0.dev - UI Generation</h3>
                <p>Use v0.dev for generating patient dashboard layouts, symptom checker conversation UI, appointment calendar components, and medical history displays. The generated components provide a solid foundation that you can then secure and customize.</p>

                <div class="callout callout-tip">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>
                        Pro Tip
                    </div>
                    <p>When using v0.dev for healthcare UIs, prompt for accessibility features explicitly. Healthcare applications often serve users with varying abilities, so WCAG compliance should be built in from the start.</p>
                </div>

                <h3 id="ai-cursor">Cursor - Development & Security</h3>
                <p>Use Cursor for security review and hardening, implementing data protection considerations, and testing authentication flows. Cursor's inline AI suggestions are particularly helpful for catching security issues during development.</p>

                <!-- Section: Build Steps -->
                <h2 id="build-steps">Step-by-Step Build Guide</h2>

                <h3 id="phase-1">Phase 1: Secure Foundation</h3>
                <p>Start by setting up Next.js with strict TypeScript configuration. Security begins at the foundation level with proper type checking and secure defaults.</p>

                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment"># Create Next.js project with TypeScript</span>
npx create-next-app@latest patient-portal --typescript --tailwind --app

<span class="comment"># Navigate to project</span>
cd patient-portal

<span class="comment"># Install security and healthcare-specific dependencies</span>
npm install @supabase/supabase-js @supabase/auth-helpers-nextjs
npm install @anthropic-ai/sdk
npm install zod <span class="comment"># For input validation</span>
npm install nanoid <span class="comment"># For secure ID generation</span></code></pre>
                </div>

                <p>Configure environment variables securely. Never commit these to version control:</p>

                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment"># .env.local (never commit this file)</span>
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
ANTHROPIC_API_KEY=your_claude_api_key
ENCRYPTION_KEY=your_32_character_encryption_key</code></pre>
                </div>

                <p>Set up audit logging from day one. Every data access should be logged for security and compliance purposes.</p>

                <h3 id="phase-2">Phase 2: Authentication System</h3>
                <p>Build a robust MFA-enabled authentication flow. Healthcare applications require stronger authentication than typical web apps.</p>

                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment">// lib/supabase-client.ts - Secure client setup</span>
<span class="keyword">import</span> { createClientComponentClient } <span class="keyword">from</span> <span class="string">'@supabase/auth-helpers-nextjs'</span>

<span class="keyword">export const</span> <span class="function">createSecureClient</span> = () => {
  <span class="keyword">return</span> createClientComponentClient({
    options: {
      auth: {
        autoRefreshToken: <span class="keyword">true</span>,
        persistSession: <span class="keyword">true</span>,
        detectSessionInUrl: <span class="keyword">true</span>,
      },
    },
  })
}

<span class="comment">// Configure MFA requirement</span>
<span class="keyword">export const</span> MFA_REQUIRED = <span class="keyword">true</span></code></pre>
                </div>

                <p>Key authentication features to implement:</p>
                <ul>
                    <li>Multi-factor authentication using TOTP (Time-based One-Time Password)</li>
                    <li>Secure session management with automatic refresh</li>
                    <li>Strong password requirements (minimum 12 characters, complexity rules)</li>
                    <li>Account lockout after failed attempts</li>
                    <li>Session timeout for inactive users</li>
                </ul>

                <h3 id="phase-3">Phase 3: Patient Dashboard</h3>
                <p>Create the main patient interface with secure data fetching. All patient data should be fetched server-side when possible.</p>

                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment">// app/dashboard/page.tsx - Server component for security</span>
<span class="keyword">import</span> { createServerComponentClient } <span class="keyword">from</span> <span class="string">'@supabase/auth-helpers-nextjs'</span>
<span class="keyword">import</span> { cookies } <span class="keyword">from</span> <span class="string">'next/headers'</span>
<span class="keyword">import</span> { redirect } <span class="keyword">from</span> <span class="string">'next/navigation'</span>
<span class="keyword">import</span> { logDataAccess } <span class="keyword">from</span> <span class="string">'@/lib/audit'</span>

<span class="keyword">export default async function</span> <span class="function">DashboardPage</span>() {
  <span class="keyword">const</span> supabase = <span class="function">createServerComponentClient</span>({ cookies })

  <span class="keyword">const</span> { data: { user } } = <span class="keyword">await</span> supabase.auth.<span class="function">getUser</span>()

  <span class="keyword">if</span> (!user) {
    <span class="function">redirect</span>(<span class="string">'/login'</span>)
  }

  <span class="comment">// Log data access for audit trail</span>
  <span class="keyword">await</span> <span class="function">logDataAccess</span>({
    userId: user.id,
    action: <span class="string">'VIEW_DASHBOARD'</span>,
    timestamp: <span class="keyword">new</span> Date().toISOString(),
  })

  <span class="comment">// Fetch patient data securely</span>
  <span class="keyword">const</span> { data: patientData } = <span class="keyword">await</span> supabase
    .<span class="function">from</span>(<span class="string">'patients'</span>)
    .<span class="function">select</span>(<span class="string">'*'</span>)
    .<span class="function">eq</span>(<span class="string">'user_id'</span>, user.id)
    .<span class="function">single</span>()

  <span class="keyword">return</span> (
    &lt;DashboardLayout patient={patientData} /&gt;
  )
}</code></pre>
                </div>

                <p>Dashboard components to build:</p>
                <ul>
                    <li>Patient profile management with edit capabilities</li>
                    <li>Upcoming and past appointments view</li>
                    <li>Secure messaging interface</li>
                    <li>Notification preferences and settings</li>
                </ul>

                <h3 id="phase-4">Phase 4: AI Symptom Checker</h3>
                <p>This is the core AI feature. Design a conversational flow that helps users describe symptoms while being clear about limitations.</p>

                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment">// app/api/symptom-check/route.ts</span>
<span class="keyword">import</span> Anthropic <span class="keyword">from</span> <span class="string">'@anthropic-ai/sdk'</span>
<span class="keyword">import</span> { NextRequest, NextResponse } <span class="keyword">from</span> <span class="string">'next/server'</span>
<span class="keyword">import</span> { rateLimit } <span class="keyword">from</span> <span class="string">'@/lib/rate-limit'</span>
<span class="keyword">import</span> { validateSession } <span class="keyword">from</span> <span class="string">'@/lib/auth'</span>
<span class="keyword">import</span> { logSymptomQuery } <span class="keyword">from</span> <span class="string">'@/lib/audit'</span>

<span class="keyword">const</span> anthropic = <span class="keyword">new</span> Anthropic({
  apiKey: process.env.ANTHROPIC_API_KEY,
})

<span class="keyword">const</span> SYSTEM_PROMPT = <span class="string">`You are a helpful health information assistant.
Your role is to help users understand their symptoms and provide general
health information.

IMPORTANT GUIDELINES:
- Always remind users this is NOT medical advice
- Never diagnose conditions
- Recommend consulting healthcare providers for proper evaluation
- Ask clarifying questions about symptom duration, severity, and context
- Flag emergency symptoms that require immediate medical attention
- Be empathetic but factual

If symptoms suggest an emergency (chest pain, difficulty breathing,
severe bleeding, etc.), immediately advise calling emergency services.`</span>

<span class="keyword">export async function</span> <span class="function">POST</span>(req: NextRequest) {
  <span class="comment">// Rate limiting</span>
  <span class="keyword">const</span> rateLimitResult = <span class="keyword">await</span> <span class="function">rateLimit</span>(req)
  <span class="keyword">if</span> (!rateLimitResult.success) {
    <span class="keyword">return</span> NextResponse.<span class="function">json</span>(
      { error: <span class="string">'Too many requests. Please wait before trying again.'</span> },
      { status: 429 }
    )
  }

  <span class="comment">// Validate session</span>
  <span class="keyword">const</span> session = <span class="keyword">await</span> <span class="function">validateSession</span>(req)
  <span class="keyword">if</span> (!session) {
    <span class="keyword">return</span> NextResponse.<span class="function">json</span>(
      { error: <span class="string">'Unauthorized'</span> },
      { status: 401 }
    )
  }

  <span class="keyword">const</span> { message, conversationHistory } = <span class="keyword">await</span> req.<span class="function">json</span>()

  <span class="comment">// Log query for audit (without storing actual symptoms for privacy)</span>
  <span class="keyword">await</span> <span class="function">logSymptomQuery</span>({
    userId: session.user.id,
    timestamp: <span class="keyword">new</span> Date().toISOString(),
  })

  <span class="keyword">const</span> response = <span class="keyword">await</span> anthropic.messages.<span class="function">create</span>({
    model: <span class="string">'claude-3-sonnet-20240229'</span>,
    max_tokens: 1024,
    system: SYSTEM_PROMPT,
    messages: [
      ...conversationHistory,
      { role: <span class="string">'user'</span>, content: message }
    ],
  })

  <span class="keyword">return</span> NextResponse.<span class="function">json</span>({
    response: response.content[0].text,
    disclaimer: <span class="string">'This information is for educational purposes only and is not medical advice.'</span>,
  })
}</code></pre>
                </div>

                <p>Symptom checker features:</p>
                <ul>
                    <li>Conversational UI with message history</li>
                    <li>Clear medical disclaimers on every response</li>
                    <li>Emergency symptom detection and alerts</li>
                    <li>Symptom history tracking for user reference</li>
                    <li>Triage recommendations (urgent, soon, routine)</li>
                </ul>

                <h3 id="phase-5">Phase 5: Appointment System</h3>
                <p>Integrate scheduling functionality with provider availability management.</p>

                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment">// lib/scheduling.ts - Appointment management</span>
<span class="keyword">import</span> { createServerClient } <span class="keyword">from</span> <span class="string">'@/lib/supabase-server'</span>

<span class="keyword">export interface</span> Appointment {
  id: <span class="keyword">string</span>
  patientId: <span class="keyword">string</span>
  providerId: <span class="keyword">string</span>
  dateTime: <span class="keyword">string</span>
  type: <span class="string">'in-person'</span> | <span class="string">'telehealth'</span>
  status: <span class="string">'scheduled'</span> | <span class="string">'completed'</span> | <span class="string">'cancelled'</span>
  notes?: <span class="keyword">string</span>
}

<span class="keyword">export async function</span> <span class="function">bookAppointment</span>(
  patientId: <span class="keyword">string</span>,
  providerId: <span class="keyword">string</span>,
  dateTime: <span class="keyword">string</span>,
  type: Appointment[<span class="string">'type'</span>]
): Promise&lt;Appointment&gt; {
  <span class="keyword">const</span> supabase = <span class="function">createServerClient</span>()

  <span class="comment">// Check provider availability</span>
  <span class="keyword">const</span> { data: existing } = <span class="keyword">await</span> supabase
    .<span class="function">from</span>(<span class="string">'appointments'</span>)
    .<span class="function">select</span>(<span class="string">'*'</span>)
    .<span class="function">eq</span>(<span class="string">'provider_id'</span>, providerId)
    .<span class="function">eq</span>(<span class="string">'date_time'</span>, dateTime)
    .<span class="function">eq</span>(<span class="string">'status'</span>, <span class="string">'scheduled'</span>)

  <span class="keyword">if</span> (existing && existing.length > 0) {
    <span class="keyword">throw new</span> Error(<span class="string">'Time slot not available'</span>)
  }

  <span class="keyword">const</span> { data, error } = <span class="keyword">await</span> supabase
    .<span class="function">from</span>(<span class="string">'appointments'</span>)
    .<span class="function">insert</span>({
      patient_id: patientId,
      provider_id: providerId,
      date_time: dateTime,
      type,
      status: <span class="string">'scheduled'</span>,
    })
    .<span class="function">select</span>()
    .<span class="function">single</span>()

  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error
  <span class="keyword">return</span> data
}</code></pre>
                </div>

                <h3 id="phase-6">Phase 6: Security and Compliance</h3>
                <p>Implement comprehensive security measures and audit capabilities.</p>

                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment">// lib/encryption.ts - Data encryption utilities</span>
<span class="keyword">import</span> { createCipheriv, createDecipheriv, randomBytes } <span class="keyword">from</span> <span class="string">'crypto'</span>

<span class="keyword">const</span> ALGORITHM = <span class="string">'aes-256-gcm'</span>
<span class="keyword">const</span> KEY = Buffer.<span class="function">from</span>(process.env.ENCRYPTION_KEY!, <span class="string">'hex'</span>)

<span class="keyword">export function</span> <span class="function">encryptData</span>(data: <span class="keyword">string</span>): <span class="keyword">string</span> {
  <span class="keyword">const</span> iv = <span class="function">randomBytes</span>(16)
  <span class="keyword">const</span> cipher = <span class="function">createCipheriv</span>(ALGORITHM, KEY, iv)

  <span class="keyword">let</span> encrypted = cipher.<span class="function">update</span>(data, <span class="string">'utf8'</span>, <span class="string">'hex'</span>)
  encrypted += cipher.<span class="function">final</span>(<span class="string">'hex'</span>)

  <span class="keyword">const</span> authTag = cipher.<span class="function">getAuthTag</span>()

  <span class="keyword">return</span> iv.<span class="function">toString</span>(<span class="string">'hex'</span>) + <span class="string">':'</span> + authTag.<span class="function">toString</span>(<span class="string">'hex'</span>) + <span class="string">':'</span> + encrypted
}

<span class="keyword">export function</span> <span class="function">decryptData</span>(encryptedData: <span class="keyword">string</span>): <span class="keyword">string</span> {
  <span class="keyword">const</span> [ivHex, authTagHex, encrypted] = encryptedData.<span class="function">split</span>(<span class="string">':'</span>)

  <span class="keyword">const</span> iv = Buffer.<span class="function">from</span>(ivHex, <span class="string">'hex'</span>)
  <span class="keyword">const</span> authTag = Buffer.<span class="function">from</span>(authTagHex, <span class="string">'hex'</span>)
  <span class="keyword">const</span> decipher = <span class="function">createDecipheriv</span>(ALGORITHM, KEY, iv)

  decipher.<span class="function">setAuthTag</span>(authTag)

  <span class="keyword">let</span> decrypted = decipher.<span class="function">update</span>(encrypted, <span class="string">'hex'</span>, <span class="string">'utf8'</span>)
  decrypted += decipher.<span class="function">final</span>(<span class="string">'utf8'</span>)

  <span class="keyword">return</span> decrypted
}</code></pre>
                </div>

                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment">// lib/audit.ts - Audit logging middleware</span>
<span class="keyword">import</span> { createServerClient } <span class="keyword">from</span> <span class="string">'@/lib/supabase-server'</span>

<span class="keyword">export interface</span> AuditLog {
  userId: <span class="keyword">string</span>
  action: <span class="keyword">string</span>
  resource?: <span class="keyword">string</span>
  resourceId?: <span class="keyword">string</span>
  ipAddress?: <span class="keyword">string</span>
  userAgent?: <span class="keyword">string</span>
  timestamp: <span class="keyword">string</span>
  metadata?: Record&lt;<span class="keyword">string</span>, <span class="keyword">any</span>&gt;
}

<span class="keyword">export async function</span> <span class="function">logDataAccess</span>(log: AuditLog): Promise&lt;<span class="keyword">void</span>&gt; {
  <span class="keyword">const</span> supabase = <span class="function">createServerClient</span>()

  <span class="keyword">await</span> supabase.<span class="function">from</span>(<span class="string">'audit_logs'</span>).<span class="function">insert</span>({
    user_id: log.userId,
    action: log.action,
    resource: log.resource,
    resource_id: log.resourceId,
    ip_address: log.ipAddress,
    user_agent: log.userAgent,
    timestamp: log.timestamp,
    metadata: log.metadata,
  })
}

<span class="comment">// Middleware for automatic audit logging</span>
<span class="keyword">export function</span> <span class="function">withAuditLog</span>(
  handler: Function,
  action: <span class="keyword">string</span>
) {
  <span class="keyword">return async</span> (req: Request, ...args: <span class="keyword">any</span>[]) => {
    <span class="keyword">const</span> session = <span class="keyword">await</span> <span class="function">getSession</span>(req)

    <span class="keyword">if</span> (session?.user) {
      <span class="keyword">await</span> <span class="function">logDataAccess</span>({
        userId: session.user.id,
        action,
        ipAddress: req.headers.<span class="function">get</span>(<span class="string">'x-forwarded-for'</span>) || <span class="string">'unknown'</span>,
        userAgent: req.headers.<span class="function">get</span>(<span class="string">'user-agent'</span>) || <span class="string">'unknown'</span>,
        timestamp: <span class="keyword">new</span> Date().<span class="function">toISOString</span>(),
      })
    }

    <span class="keyword">return</span> <span class="function">handler</span>(req, ...args)
  }
}</code></pre>
                </div>

                <!-- Section: Disclaimers -->
                <h2 id="disclaimers">Important Disclaimers</h2>

                <div class="callout callout-danger">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                        Critical: AI Limitations
                    </div>
                    <p>The AI symptom checker provides preliminary guidance only. It is NOT a substitute for professional medical advice, diagnosis, or treatment. Users must always consult qualified healthcare providers for medical decisions.</p>
                </div>

                <p>Make sure your application clearly communicates these important points to users:</p>

                <ul>
                    <li><strong>AI provides preliminary guidance only</strong> - The symptom checker helps users articulate their symptoms and provides general health information, but cannot diagnose conditions</li>
                    <li><strong>Not a replacement for medical professionals</strong> - Always recommend that users consult with healthcare providers for proper evaluation and treatment</li>
                    <li><strong>Users should always consult healthcare providers</strong> - Build in prominent disclaimers and require acknowledgment before using the symptom checker</li>
                    <li><strong>Data handling considerations</strong> - Be transparent about how health information is stored, processed, and protected</li>
                </ul>

                <div class="callout callout-info">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>
                        Compliance Note
                    </div>
                    <p>This guide provides technical implementation guidance. For production healthcare applications, consult with legal and compliance experts regarding HIPAA, GDPR, and other applicable regulations in your jurisdiction.</p>
                </div>

                <!-- Section: Code Examples -->
                <h2 id="code-examples">Additional Code Examples</h2>

                <h3>Secure Supabase Client Setup</h3>
                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment">// lib/supabase-server.ts</span>
<span class="keyword">import</span> { createServerClient <span class="keyword">as</span> createClient } <span class="keyword">from</span> <span class="string">'@supabase/ssr'</span>
<span class="keyword">import</span> { cookies } <span class="keyword">from</span> <span class="string">'next/headers'</span>

<span class="keyword">export function</span> <span class="function">createServerClient</span>() {
  <span class="keyword">const</span> cookieStore = <span class="function">cookies</span>()

  <span class="keyword">return</span> <span class="function">createClient</span>(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        <span class="function">get</span>(name: <span class="keyword">string</span>) {
          <span class="keyword">return</span> cookieStore.<span class="function">get</span>(name)?.value
        },
        <span class="function">set</span>(name: <span class="keyword">string</span>, value: <span class="keyword">string</span>, options: <span class="keyword">any</span>) {
          cookieStore.<span class="function">set</span>({ name, value, ...options })
        },
        <span class="function">remove</span>(name: <span class="keyword">string</span>, options: <span class="keyword">any</span>) {
          cookieStore.<span class="function">set</span>({ name, value: <span class="string">''</span>, ...options })
        },
      },
    }
  )
}</code></pre>
                </div>

                <h3>Encrypted Data Storage Pattern</h3>
                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment">// lib/patient-notes.ts - Encrypted patient notes</span>
<span class="keyword">import</span> { encryptData, decryptData } <span class="keyword">from</span> <span class="string">'./encryption'</span>
<span class="keyword">import</span> { createServerClient } <span class="keyword">from</span> <span class="string">'./supabase-server'</span>
<span class="keyword">import</span> { logDataAccess } <span class="keyword">from</span> <span class="string">'./audit'</span>

<span class="keyword">export async function</span> <span class="function">savePatientNote</span>(
  patientId: <span class="keyword">string</span>,
  note: <span class="keyword">string</span>,
  userId: <span class="keyword">string</span>
): Promise&lt;<span class="keyword">void</span>&gt; {
  <span class="keyword">const</span> supabase = <span class="function">createServerClient</span>()

  <span class="comment">// Encrypt sensitive note content</span>
  <span class="keyword">const</span> encryptedNote = <span class="function">encryptData</span>(note)

  <span class="keyword">await</span> supabase.<span class="function">from</span>(<span class="string">'patient_notes'</span>).<span class="function">insert</span>({
    patient_id: patientId,
    encrypted_content: encryptedNote,
    created_by: userId,
    created_at: <span class="keyword">new</span> Date().<span class="function">toISOString</span>(),
  })

  <span class="comment">// Log the write operation</span>
  <span class="keyword">await</span> <span class="function">logDataAccess</span>({
    userId,
    action: <span class="string">'CREATE_PATIENT_NOTE'</span>,
    resource: <span class="string">'patient_notes'</span>,
    resourceId: patientId,
    timestamp: <span class="keyword">new</span> Date().<span class="function">toISOString</span>(),
  })
}

<span class="keyword">export async function</span> <span class="function">getPatientNotes</span>(
  patientId: <span class="keyword">string</span>,
  userId: <span class="keyword">string</span>
): Promise&lt;<span class="keyword">string</span>[]&gt; {
  <span class="keyword">const</span> supabase = <span class="function">createServerClient</span>()

  <span class="keyword">const</span> { data } = <span class="keyword">await</span> supabase
    .<span class="function">from</span>(<span class="string">'patient_notes'</span>)
    .<span class="function">select</span>(<span class="string">'encrypted_content'</span>)
    .<span class="function">eq</span>(<span class="string">'patient_id'</span>, patientId)
    .<span class="function">order</span>(<span class="string">'created_at'</span>, { ascending: <span class="keyword">false</span> })

  <span class="comment">// Log the read operation</span>
  <span class="keyword">await</span> <span class="function">logDataAccess</span>({
    userId,
    action: <span class="string">'READ_PATIENT_NOTES'</span>,
    resource: <span class="string">'patient_notes'</span>,
    resourceId: patientId,
    timestamp: <span class="keyword">new</span> Date().<span class="function">toISOString</span>(),
  })

  <span class="comment">// Decrypt notes for display</span>
  <span class="keyword">return</span> (data || []).<span class="function">map</span>(row => <span class="function">decryptData</span>(row.encrypted_content))
}</code></pre>
                </div>

                <!-- Section: Common Issues -->
                <h2 id="common-issues">Common Issues and Solutions</h2>
                <p>Here are some common issues you might encounter and how to solve them:</p>

                <div class="callout callout-warning">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        Session Timeout Handling
                    </div>
                    <p>Healthcare apps should have shorter session timeouts. Implement a warning modal that appears before session expiry, and ensure users are redirected to login on timeout. Store session state in memory rather than localStorage for sensitive data.</p>
                </div>

                <h3>Rate Limiting Symptom Queries</h3>
                <p>Implement rate limiting to prevent abuse of the AI symptom checker. A reasonable limit is 10-20 queries per hour per user. Use Redis or in-memory storage for rate limit tracking:</p>

                <div class="code-block">
                    <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    <pre><code><span class="comment">// lib/rate-limit.ts</span>
<span class="keyword">const</span> rateLimitMap = <span class="keyword">new</span> Map&lt;<span class="keyword">string</span>, { count: <span class="keyword">number</span>; resetTime: <span class="keyword">number</span> }&gt;()

<span class="keyword">export async function</span> <span class="function">rateLimit</span>(
  req: Request,
  limit = 20,
  windowMs = 3600000 <span class="comment">// 1 hour</span>
): Promise&lt;{ success: <span class="keyword">boolean</span>; remaining: <span class="keyword">number</span> }&gt; {
  <span class="keyword">const</span> ip = req.headers.<span class="function">get</span>(<span class="string">'x-forwarded-for'</span>) || <span class="string">'unknown'</span>
  <span class="keyword">const</span> now = Date.<span class="function">now</span>()

  <span class="keyword">const</span> record = rateLimitMap.<span class="function">get</span>(ip)

  <span class="keyword">if</span> (!record || now > record.resetTime) {
    rateLimitMap.<span class="function">set</span>(ip, { count: 1, resetTime: now + windowMs })
    <span class="keyword">return</span> { success: <span class="keyword">true</span>, remaining: limit - 1 }
  }

  <span class="keyword">if</span> (record.count >= limit) {
    <span class="keyword">return</span> { success: <span class="keyword">false</span>, remaining: 0 }
  }

  record.count++
  <span class="keyword">return</span> { success: <span class="keyword">true</span>, remaining: limit - record.count }
}</code></pre>
                </div>

                <h3>Handling Sensitive Data in Logs</h3>
                <p>Never log actual symptom descriptions or personal health information. Log only metadata such as timestamps, user IDs (hashed if needed), and action types. Implement log redaction for any accidental PII exposure.</p>

                <h3>MFA Recovery Flows</h3>
                <p>Provide secure account recovery options for users who lose access to their MFA device. This typically involves email verification combined with security questions, followed by a mandatory MFA re-enrollment.</p>

                <!-- Section: Next Steps -->
                <h2 id="next-steps">Next Steps</h2>
                <p>Once you have completed this guide, consider these enhancements to make your patient portal even more robust:</p>

                <ul>
                    <li><strong>Add telehealth video integration</strong> - Integrate WebRTC or a service like Twilio for secure video consultations</li>
                    <li><strong>Implement prescription management</strong> - Add medication tracking, refill reminders, and pharmacy integration</li>
                    <li><strong>Build provider dashboard</strong> - Create the healthcare provider side of the portal for managing patients and appointments</li>
                    <li><strong>Add health metric tracking</strong> - Integrate with wearables and allow manual entry of vitals like blood pressure, weight, and glucose levels</li>
                    <li><strong>Implement insurance verification</strong> - Add real-time insurance eligibility checking before appointments</li>
                </ul>

                <!-- Share Section -->
                <div class="share-section">
                    <span class="share-label">Share this guide:</span>
                    <div class="share-buttons" role="group" aria-label="Share this guide">
                        <button class="share-btn" data-share="twitter" title="Share on Twitter" aria-label="Share on Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </button>
                        <button class="share-btn" data-share="linkedin" title="Share on LinkedIn" aria-label="Share on LinkedIn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                        </button>
                        <button class="share-btn" data-share="copy" title="Copy link" aria-label="Copy link to clipboard">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                            </svg>
                        </button>
                        <button class="share-btn" data-share="email" title="Share via email" aria-label="Share via email">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Related Guides -->
                <div class="related-guides">
                    <h3 class="related-guides-title">Related Guides</h3>
                    <div class="related-guides-grid">
                        <a href="/guides/fitness-workout-generator.html" class="related-guide-card">
                            <h4>Fitness AI Workout Generator</h4>
                            <p>Build an AI-powered fitness app that creates personalized workout plans.</p>
                        </a>
                        <a href="/guides/nonprofit-donor-dashboard.html" class="related-guide-card">
                            <h4>Non-profit AI Donor Dashboard</h4>
                            <p>Create a donor management system with AI-powered insights and predictions.</p>
                        </a>
                        <a href="/guides/saas-ai-feature-builder.html" class="related-guide-card">
                            <h4>SaaS AI Feature Builder</h4>
                            <p>Add AI-powered features to your existing SaaS application.</p>
                        </a>
                    </div>
                </div>

                <!-- Follow Section -->
                <div class="follow-section">
                    <h3>Follow the Vibe Coding Enthusiast</h3>
                    <p>Follow JD  product updates on LinkedIn, personal takes on X.</p>
                    <div class="social-follow-buttons">
                        <a href="https://www.linkedin.com/in/jeremiahddavid/" target="_blank" rel="noopener noreferrer" class="social-follow-btn linkedin">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                            Follow on LinkedIn
                        </a>
                        <a href="https://x.com/jeremiahddavid" target="_blank" rel="noopener noreferrer" class="social-follow-btn twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                            Follow on X
                        </a>
                    </div>
                </div>
            </article>
        </div>
    </main>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M18 15l-6-6-6 6"/>
        </svg>
    </button>

        <footer class="footer">
    <div class="container">
        <div class="footer-simple">
            <div class="footer-brand">
                <a href="/" class="footer-logo">
                    <img src="/favicon.png" alt="Vibe Coding Enthusiast" class="logo-icon" width="28" height="28">
                    <span>Vibe Coding Enthusiast</span>
                </a>
                <p>Free guides for building with AI</p>
            </div>

            <nav class="footer-nav">
                <a href="/guides/">Guides</a>
                <span class="footer-dot"></span>
                <a href="/paths/">Paths</a>
                <span class="footer-dot"></span>
                <a href="/learn/">Learn</a>
                <span class="footer-dot"></span>
                <a href="/tools/">Tools</a>
                <span class="footer-dot"></span>
                <a href="/stacks/">Stacks</a>
                <span class="footer-dot"></span>
                <a href="/#about">About</a>
            </nav>

            <div class="footer-social">
                <a href="https://www.linkedin.com/in/jeremiahddavid/" target="_blank" rel="noopener noreferrer" aria-label="Follow on LinkedIn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                </a>
                <a href="https://x.com/jeremiahddavid" target="_blank" rel="noopener noreferrer" aria-label="Follow on X">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            <p> 2025 Vibe Coding Enthusiast</p>
            <div class="footer-legal">
                <a href="/privacy.html">Privacy</a>
                <a href="/terms.html">Terms</a>
            </div>
        </div>
    </div>
</footer>

    <script src="/script.js"></script>

    <!-- Guide-Specific JavaScript -->
    <script>
        // Reading Progress Bar
        (function() {
            const progressBar = document.getElementById('readingProgress');
            const article = document.querySelector('.article-content');

            if (progressBar && article) {
                window.addEventListener('scroll', function() {
                    const articleTop = article.offsetTop;
                    const articleHeight = article.offsetHeight;
                    const windowHeight = window.innerHeight;
                    const scrollTop = window.scrollY;

                    const progress = Math.min(100, Math.max(0,
                        ((scrollTop - articleTop + windowHeight * 0.3) / articleHeight) * 100
                    ));

                    progressBar.style.width = progress + '%';
                    progressBar.setAttribute('aria-valuenow', Math.round(progress));
                });
            }
        })();

        // Generate Table of Contents
        (function() {
            const article = document.querySelector('.article-content');
            const tocList = document.getElementById('tocList');

            if (article && tocList) {
                const headings = article.querySelectorAll('h2, h3');
                let tocHTML = '';

                headings.forEach(function(heading) {
                    const id = heading.getAttribute('id');
                    const text = heading.textContent.replace(/#/g, '').trim();
                    const level = heading.tagName.toLowerCase();
                    const className = level === 'h3' ? 'toc-h3' : '';

                    if (id) {
                        tocHTML += '<li><a href="#' + id + '" class="' + className + '">' + text + '</a></li>';

                        // Add anchor link to heading
                        const anchor = document.createElement('a');
                        anchor.href = '#' + id;
                        anchor.className = 'anchor-link';
                        anchor.setAttribute('aria-label', 'Link to ' + text);
                        anchor.textContent = '#';
                        heading.appendChild(anchor);
                    }
                });

                tocList.innerHTML = tocHTML;

                // Highlight active TOC item on scroll
                const tocLinks = tocList.querySelectorAll('a');

                function updateActiveTOC() {
                    const scrollPos = window.scrollY + 120;

                    headings.forEach(function(heading, index) {
                        const id = heading.getAttribute('id');
                        const headingTop = heading.offsetTop;
                        const nextHeading = headings[index + 1];
                        const nextTop = nextHeading ? nextHeading.offsetTop : document.body.scrollHeight;

                        if (scrollPos >= headingTop && scrollPos < nextTop) {
                            tocLinks.forEach(function(link) {
                                link.classList.remove('active');
                                if (link.getAttribute('href') === '#' + id) {
                                    link.classList.add('active');
                                }
                            });
                        }
                    });
                }

                window.addEventListener('scroll', updateActiveTOC);
                updateActiveTOC();
            }
        })();

        // Copy Code Button
        (function() {
            const copyButtons = document.querySelectorAll('.code-copy-btn');

            copyButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    const codeBlock = this.closest('.code-block');
                    const code = codeBlock.querySelector('code');
                    const text = code.textContent;

                    navigator.clipboard.writeText(text).then(function() {
                        button.textContent = 'Copied!';
                        button.classList.add('copied');

                        setTimeout(function() {
                            button.textContent = 'Copy';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(function(err) {
                        console.error('Failed to copy:', err);
                    });
                });
            });
        })();

        // Share Buttons
        (function() {
            const shareButtons = document.querySelectorAll('.share-btn');
            const pageTitle = document.title;
            const pageUrl = window.location.href;

            shareButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    const shareType = this.getAttribute('data-share');
                    let shareUrl = '';

                    switch(shareType) {
                        case 'twitter':
                            shareUrl = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(pageTitle) + '&url=' + encodeURIComponent(pageUrl);
                            window.open(shareUrl, '_blank', 'width=550,height=420');
                            break;
                        case 'linkedin':
                            shareUrl = 'https://www.linkedin.com/sharing/share-offsite/?url=' + encodeURIComponent(pageUrl);
                            window.open(shareUrl, '_blank', 'width=550,height=420');
                            break;
                        case 'copy':
                            navigator.clipboard.writeText(pageUrl).then(function() {
                                // Show feedback
                                const originalTitle = button.getAttribute('title');
                                button.setAttribute('title', 'Link copied!');
                                setTimeout(function() {
                                    button.setAttribute('title', originalTitle);
                                }, 2000);
                            });
                            break;
                        case 'email':
                            shareUrl = 'mailto:?subject=' + encodeURIComponent(pageTitle) + '&body=' + encodeURIComponent('Check out this guide: ' + pageUrl);
                            window.location.href = shareUrl;
                            break;
                    }
                });
            });
        })();
    </script>
</body>
</html>
