<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Primary Meta Tags -->
    <title>Build an AI Property Matcher | AI Build Guides | Vibe Coding Enthusiast</title>
    <meta name="title" content="Build an AI Property Matcher | AI Build Guides | Vibe Coding Enthusiast">
    <meta name="description" content="Learn to build an AI-powered property matching system using vector embeddings. Match buyers with their perfect properties using natural language preferences and semantic search.">
    <meta name="keywords" content="proptech, real estate AI, property matching, vector embeddings, pgvector, Supabase, Next.js, OpenAI embeddings, ai development, vibe coding, build guide, tutorial">
    <meta name="author" content="Vibe Coding Enthusiast">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://vibecodingenthusiast.com/guides/realestate-property-matcher.html">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://vibecodingenthusiast.com/guides/realestate-property-matcher.html">
    <meta property="og:title" content="Build an AI Property Matcher | AI Build Guides">
    <meta property="og:description" content="Learn to build an AI-powered property matching system using vector embeddings. Match buyers with their perfect properties using natural language preferences.">
    <meta property="og:image" content="https://vibecodingenthusiast.com/guides/images/realestate-property-matcher-og.png">
    <meta property="og:site_name" content="Vibe Coding Enthusiast">
    <meta property="og:locale" content="en_US">
    <meta property="article:published_time" content="2025-01-14">
    <meta property="article:modified_time" content="2025-01-14">
    <meta property="article:author" content="Vibe Coding Enthusiast">
    <meta property="article:section" content="AI Build Guides">
    <meta property="article:tag" content="PropTech">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://vibecodingenthusiast.com/guides/realestate-property-matcher.html">
    <meta name="twitter:title" content="Build an AI Property Matcher | AI Build Guides">
    <meta name="twitter:description" content="Learn to build an AI-powered property matching system using vector embeddings. Match buyers with their perfect properties using natural language preferences.">
    <meta name="twitter:image" content="https://vibecodingenthusiast.com/guides/images/realestate-property-matcher-og.png">
    <meta name="twitter:creator" content="@vibecodingenthusiast">

    <!-- Schema.org JSON-LD for TechArticle -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "TechArticle",
        "headline": "Build an AI Property Matcher",
        "description": "Learn to build an AI-powered property matching system using vector embeddings. Match buyers with their perfect properties using natural language preferences and semantic search.",
        "image": "https://vibecodingenthusiast.com/guides/images/realestate-property-matcher-og.png",
        "author": {
            "@type": "Organization",
            "name": "Vibe Coding Enthusiast",
            "url": "https://vibecodingenthusiast.com"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Vibe Coding Enthusiast",
            "logo": {
                "@type": "ImageObject",
                "url": "https://vibecodingenthusiast.com/favicon.png"
            }
        },
        "datePublished": "2025-01-14",
        "dateModified": "2025-01-14",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://vibecodingenthusiast.com/guides/realestate-property-matcher.html"
        },
        "articleSection": "AI Build Guides",
        "keywords": "proptech, real estate AI, property matching, vector embeddings, pgvector, Supabase, Next.js, OpenAI embeddings",
        "proficiencyLevel": "Intermediate",
        "dependencies": "Next.js 14, Supabase, OpenAI API, Claude API",
        "timeRequired": "PT240M"
    }
    </script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/styles.css">

    <!-- Guide-Specific Styles -->
    <style>
        /* Reading Progress Bar */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-green));
            z-index: 1001;
            transition: width 0.1s ease-out;
        }

        /* Article Header */
        .article-header {
            padding: 140px 0 60px;
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.08) 0%, transparent 50%);
            position: relative;
            overflow: hidden;
        }
        .article-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(168, 85, 247, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
        }

        /* Breadcrumb */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-bottom: 24px;
            flex-wrap: wrap;
        }
        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        .breadcrumb a:hover {
            color: var(--accent-primary);
        }
        .breadcrumb-separator {
            color: var(--text-muted);
        }
        .breadcrumb-current {
            color: var(--text-primary);
        }

        /* Guide Meta Badges */
        .guide-meta {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .badge-beginner {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        .badge-intermediate {
            background: rgba(245, 158, 11, 0.15);
            color: #f59e0b;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        .badge-advanced {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        .badge-time {
            background: rgba(129, 140, 248, 0.15);
            color: var(--accent-primary);
            border: 1px solid rgba(129, 140, 248, 0.3);
        }
        .badge-time svg {
            width: 14px;
            height: 14px;
        }

        /* Article Title */
        .article-header h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 20px;
            max-width: 900px;
        }
        .article-header .lead {
            font-size: 1.2rem;
            color: var(--text-secondary);
            line-height: 1.7;
            max-width: 700px;
            margin-bottom: 28px;
        }

        /* Share Buttons in Header */
        .share-buttons {
            display: flex;
            gap: 10px;
        }
        .share-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .share-btn:hover {
            background: var(--bg-secondary);
            color: var(--accent-primary);
            border-color: var(--accent-primary);
        }
        .share-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Article Layout - Main Content with Sidebar */
        .article-layout {
            display: grid;
            grid-template-columns: 260px 1fr;
            gap: 60px;
            max-width: 1400px;
            margin: 0 auto;
            padding: clamp(32px, 5vw, 60px) clamp(16px, 4vw, 24px);
        }
        @media (max-width: 1100px) {
            .article-layout {
                grid-template-columns: 1fr;
                gap: 40px;
            }
        }

        /* Table of Contents Sidebar */
        .toc-sidebar {
            position: sticky;
            top: 100px;
            height: fit-content;
            max-height: calc(100vh - 140px);
            overflow-y: auto;
        }
        @media (max-width: 1100px) {
            .toc-sidebar {
                position: static;
                background: var(--bg-card);
                border: 1px solid var(--border-color);
                border-radius: var(--radius-lg);
                padding: 24px;
            }
        }
        .toc-title {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 16px;
        }
        .toc-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .toc-list li {
            margin-bottom: 8px;
        }
        .toc-list a {
            display: block;
            padding: 8px 12px;
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 2px solid transparent;
            transition: all 0.2s ease;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }
        .toc-list a:hover {
            color: var(--text-primary);
            background: rgba(129, 140, 248, 0.08);
        }
        .toc-list a.active {
            color: var(--accent-primary);
            border-left-color: var(--accent-primary);
            background: rgba(129, 140, 248, 0.1);
        }
        .toc-list .toc-h3 {
            padding-left: 24px;
            font-size: 0.8125rem;
        }

        /* Article Content */
        .article-content {
            max-width: 800px;
        }
        .article-content h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-top: 56px;
            margin-bottom: 20px;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
        }
        .article-content h2:first-of-type {
            margin-top: 0;
            padding-top: 0;
            border-top: none;
        }
        .article-content h3 {
            font-size: 1.375rem;
            font-weight: 600;
            margin-top: 40px;
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        .article-content p {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 20px;
        }
        .article-content ul,
        .article-content ol {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 20px;
            padding-left: 24px;
        }
        .article-content li {
            margin-bottom: 8px;
        }

        /* Tech Stack Table */
        .tech-stack-table {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0 32px;
            font-size: 0.9rem;
        }
        .tech-stack-table thead {
            background: var(--bg-secondary);
        }
        .tech-stack-table th {
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border-color);
        }
        .tech-stack-table td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }
        .tech-stack-table tbody tr:hover {
            background: rgba(129, 140, 248, 0.04);
        }

        /* Code Blocks */
        .code-block {
            position: relative;
            margin: 24px 0;
            border-radius: var(--radius-lg);
            overflow: hidden;
            background: #1a1b26;
            border: 1px solid var(--border-color);
        }
        .code-block pre {
            margin: 0;
            padding: 20px 24px;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            line-height: 1.7;
            color: #c0caf5;
        }
        .code-block code {
            font-family: inherit;
        }
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 16px;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid var(--border-color);
        }
        .code-filename {
            font-size: 0.8rem;
            color: #a9b1d6;
            font-family: 'JetBrains Mono', monospace;
        }
        .code-copy-btn {
            padding: 6px 12px;
            font-size: 0.75rem;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-sm);
            color: #a9b1d6;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .code-copy-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
        }
        .code-copy-btn.copied {
            background: rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.4);
            color: #10b981;
        }

        /* Code Syntax Highlighting */
        .code-block .keyword { color: #bb9af7; }
        .code-block .string { color: #9ece6a; }
        .code-block .comment { color: #565f89; font-style: italic; }
        .code-block .function { color: #7aa2f7; }
        .code-block .variable { color: #c0caf5; }
        .code-block .property { color: #73daca; }
        .code-block .number { color: #ff9e64; }
        .code-block .type { color: #2ac3de; }

        /* Callout Boxes */
        .callout {
            padding: 20px 24px;
            border-radius: var(--radius-lg);
            margin: 24px 0;
            border-left: 4px solid;
        }
        .callout-tip {
            background: rgba(16, 185, 129, 0.1);
            border-color: #10b981;
        }
        .callout-tip .callout-title { color: #10b981; }
        .callout-warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: #f59e0b;
        }
        .callout-warning .callout-title { color: #f59e0b; }
        .callout-info {
            background: rgba(129, 140, 248, 0.1);
            border-color: var(--accent-primary);
        }
        .callout-info .callout-title { color: var(--accent-primary); }
        .callout-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .callout p {
            margin: 0;
            color: var(--text-secondary);
        }

        /* Share Section at Bottom */
        .share-section {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
            padding: 32px 0;
            margin-top: 48px;
            border-top: 1px solid var(--border-color);
        }
        .share-label {
            font-weight: 500;
            color: var(--text-secondary);
        }

        /* Related Guides */
        .related-guides {
            margin-top: 64px;
            padding-top: 48px;
            border-top: 1px solid var(--border-color);
        }
        .related-guides-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 24px;
        }
        .related-guides-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
        }
        .related-guide-card {
            display: block;
            padding: 24px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .related-guide-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }
        .related-guide-card h4 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        .related-guide-card p {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin: 0;
            line-height: 1.5;
        }

        /* Newsletter Section */
        .newsletter-section {
            margin-top: 64px;
            padding: 40px;
            background: linear-gradient(135deg, rgba(129, 140, 248, 0.1), rgba(16, 185, 129, 0.05));
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            text-align: center;
        }
        .newsletter-section h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            margin-top: 0;
        }
        .newsletter-section > p {
            color: var(--text-secondary);
            margin-bottom: 24px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        .newsletter-form {
            display: flex;
            gap: 12px;
            max-width: 440px;
            margin: 0 auto;
        }
        .newsletter-form input[type="email"] {
            flex: 1;
            padding: 14px 18px;
            font-size: 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.2s ease;
        }
        .newsletter-form input[type="email"]:focus {
            border-color: var(--accent-primary);
        }
        .newsletter-form input[type="email"]::placeholder {
            color: var(--text-muted);
        }
        .newsletter-form button {
            padding: 14px 28px;
            font-size: 1rem;
            font-weight: 600;
            background: var(--accent-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        .newsletter-form button:hover {
            background: #6366f1;
            transform: translateY(-1px);
        }
        @media (max-width: 520px) {
            .newsletter-form {
                flex-direction: column;
            }
            .newsletter-form button {
                width: 100%;
            }
        }

        /* Image styling */
        .article-content img {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-lg);
            margin: 24px 0;
            border: 1px solid var(--border-color);
        }

        /* Anchor links */
        .article-content h2 .anchor-link,
        .article-content h3 .anchor-link {
            opacity: 0;
            margin-left: 8px;
            color: var(--text-muted);
            text-decoration: none;
            transition: opacity 0.2s ease;
        }
        .article-content h2:hover .anchor-link,
        .article-content h3:hover .anchor-link {
            opacity: 1;
        }
        .article-content h2 .anchor-link:hover,
        .article-content h3 .anchor-link:hover {
            color: var(--accent-primary);
        }

        /* Feature List */
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }
        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
        }
        .feature-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(168, 85, 247, 0.1);
            border-radius: var(--radius-md);
            font-size: 1.25rem;
            flex-shrink: 0;
        }
        .feature-content h4 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-primary);
        }
        .feature-content p {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin: 0;
            line-height: 1.5;
        }

        /* Architecture Diagram */
        .architecture-diagram {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 32px;
            margin: 24px 0;
        }
        .architecture-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }
        .arch-box {
            padding: 16px 24px;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: var(--radius-md);
            text-align: center;
            min-width: 120px;
        }
        .arch-box.highlight {
            background: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.3);
        }
        .arch-box span {
            display: block;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 4px;
        }
        .arch-box strong {
            color: var(--text-primary);
            font-size: 0.9rem;
        }
        .arch-arrow {
            color: var(--text-muted);
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <!-- Reading Progress Bar -->
    <div class="reading-progress" id="readingProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Reading progress"></div>

    <!-- Header -->
    <header class="header">
        <nav class="nav container" role="navigation" aria-label="Main navigation">
            <a href="/" class="logo" aria-label="Vibe Coding Enthusiast - Home">
                <img src="/favicon.png" alt="Vibe Coding Enthusiast" class="logo-icon" width="28" height="28">
                <span class="logo-text">VibeCoding<span class="accent">Enthusiast</span></span>
            </a>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/guides/">Guides</a></li>
                <li><a href="/paths/">Paths</a></li>
                <li><a href="/learn/">Learn</a></li>
                <li><a href="/tools/">Tools</a></li>
                <li><a href="/stacks/">Stacks</a></li>
                <li><a href="/industries/">Industries</a></li>
                <li><a href="/#about">About</a></li>
            </ul>
            <div class="nav-actions">
                <a href="/guides/" class="btn btn-primary">Explore Guides</a>
            </div>
            <button class="mobile-menu-btn" aria-label="Toggle menu" aria-expanded="false">
                <span></span><span></span><span></span>
            </button>
        </nav>
    </header>

    <main id="main">
        <!-- Article Header -->
        <section class="article-header">
            <div class="container">
                <!-- Breadcrumb Navigation -->
                <nav class="breadcrumb" aria-label="Breadcrumb">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator" aria-hidden="true">/</span>
                    <a href="/guides/">Guides</a>
                    <span class="breadcrumb-separator" aria-hidden="true">/</span>
                    <span class="breadcrumb-current" aria-current="page">AI Property Matcher</span>
                </nav>

                <!-- Guide Meta Badges -->
                <div class="guide-meta">
                    <span class="badge badge-intermediate">Intermediate</span>
                    <span class="badge badge-time">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        ~4 hours
                    </span>
                </div>

                <!-- Title -->
                <h1 class="gradient-text">Build an AI Property Matcher</h1>

                <!-- Description -->
                <p class="lead">Create an intelligent property recommendation system that uses vector embeddings to match buyers with their perfect properties. Transform natural language preferences into semantic searches that understand what buyers really want.</p>

                <!-- Share Buttons -->
                <div class="share-buttons" role="group" aria-label="Share this guide">
                    <button class="share-btn" data-share="twitter" title="Share on Twitter" aria-label="Share on Twitter">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </button>
                    <button class="share-btn" data-share="linkedin" title="Share on LinkedIn" aria-label="Share on LinkedIn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </button>
                    <button class="share-btn" data-share="copy" title="Copy link" aria-label="Copy link to clipboard">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- Main Content with TOC Sidebar -->
        <div class="article-layout">
            <!-- Table of Contents Sidebar -->
            <aside class="toc-sidebar" aria-label="Table of contents">
                <div class="toc-title">On this page</div>
                <ul class="toc-list" id="tocList">
                    <noscript>
                        <li><a href="#overview">What We're Building</a></li>
                        <li><a href="#prerequisites">Prerequisites</a></li>
                        <li><a href="#tech-stack">Tech Stack</a></li>
                        <li><a href="#ai-workflow">AI Agent Workflow</a></li>
                        <li><a href="#build-steps">Build Steps</a></li>
                        <li><a href="#common-issues">Common Issues</a></li>
                        <li><a href="#next-steps">Next Steps</a></li>
                    </noscript>
                </ul>
            </aside>

            <!-- Article Content -->
            <article class="article-content">
                <!-- Section: What We're Building -->
                <h2 id="overview">What We're Building</h2>
                <p>We're building an AI-powered property matching system that revolutionizes how buyers find their dream homes. Instead of endless filter combinations and keyword searches, users can describe what they want in natural language: "A modern loft with natural light near coffee shops, good for a remote worker with a dog."</p>

                <p>The system uses OpenAI embeddings to convert property listings and user preferences into semantic vectors, then uses pgvector in Supabase to find the closest matches. Claude enhances the experience by generating compelling, personalized property descriptions that highlight why each match fits the buyer's needs.</p>

                <div class="feature-list">
                    <div class="feature-item">
                        <div class="feature-icon">ðŸŽ¯</div>
                        <div class="feature-content">
                            <h4>Semantic Matching</h4>
                            <p>Vector similarity finds properties that match intent, not just keywords</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">ðŸ’¬</div>
                        <div class="feature-content">
                            <h4>Natural Language Input</h4>
                            <p>Users describe preferences conversationally instead of using filters</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">âœ¨</div>
                        <div class="feature-content">
                            <h4>AI Descriptions</h4>
                            <p>Claude generates personalized descriptions for each match</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">ðŸ””</div>
                        <div class="feature-content">
                            <h4>Smart Alerts</h4>
                            <p>Save searches and get notified when matching properties appear</p>
                        </div>
                    </div>
                </div>

                <!-- Architecture Overview -->
                <div class="architecture-diagram">
                    <div class="architecture-flow">
                        <div class="arch-box">
                            <span>User Input</span>
                            <strong>Natural Language</strong>
                        </div>
                        <span class="arch-arrow">â†’</span>
                        <div class="arch-box highlight">
                            <span>OpenAI</span>
                            <strong>Embeddings</strong>
                        </div>
                        <span class="arch-arrow">â†’</span>
                        <div class="arch-box">
                            <span>Supabase</span>
                            <strong>pgvector Search</strong>
                        </div>
                        <span class="arch-arrow">â†’</span>
                        <div class="arch-box highlight">
                            <span>Claude</span>
                            <strong>Descriptions</strong>
                        </div>
                    </div>
                </div>

                <!-- Section: Prerequisites -->
                <h2 id="prerequisites">Prerequisites</h2>
                <p>Before starting this guide, make sure you have the following:</p>
                <ul>
                    <li><strong>Node.js 18+</strong> installed on your machine</li>
                    <li><strong>OpenAI API key</strong> with access to text-embedding-3-small model</li>
                    <li><strong>Anthropic API key</strong> for Claude API access</li>
                    <li><strong>Supabase account</strong> (free tier works fine for development)</li>
                    <li><strong>Basic TypeScript/React knowledge</strong> - familiarity with Next.js App Router is helpful</li>
                    <li><strong>Understanding of SQL basics</strong> - we'll work with database schemas</li>
                </ul>

                <!-- Section: Tech Stack -->
                <h2 id="tech-stack">Tech Stack Specification</h2>
                <p>Here's the technology stack optimized for building a production-ready property matcher:</p>
                <table class="tech-stack-table">
                    <thead>
                        <tr>
                            <th scope="col">Layer</th>
                            <th scope="col">Technology</th>
                            <th scope="col">Why This Choice</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Frontend</td>
                            <td>Next.js 14, Tailwind CSS</td>
                            <td>Server components for fast property listings UI, streaming for AI responses</td>
                        </tr>
                        <tr>
                            <td>Backend</td>
                            <td>Next.js API Routes</td>
                            <td>Serverless functions scale automatically, built-in TypeScript support</td>
                        </tr>
                        <tr>
                            <td>Database</td>
                            <td>Supabase + pgvector</td>
                            <td>PostgreSQL with native vector similarity search, real-time subscriptions for alerts</td>
                        </tr>
                        <tr>
                            <td>AI/Embeddings</td>
                            <td>OpenAI Embeddings</td>
                            <td>text-embedding-3-small offers great performance at low cost for semantic search</td>
                        </tr>
                        <tr>
                            <td>AI/Generation</td>
                            <td>Claude API</td>
                            <td>Excellent at generating compelling, contextual property descriptions</td>
                        </tr>
                        <tr>
                            <td>Deployment</td>
                            <td>Vercel</td>
                            <td>Zero-config Next.js deployment, edge functions for low latency</td>
                        </tr>
                    </tbody>
                </table>

                <!-- Section: AI Agent Workflow -->
                <h2 id="ai-workflow">AI Agent Workflow</h2>
                <p>Here's how to leverage AI tools throughout this build to maximize productivity:</p>

                <h3 id="ai-scaffolding">Project Scaffolding with Claude Code</h3>
                <p>Use Claude Code to generate the initial project structure including the database schema, API routes, and React components. Claude excels at understanding the full context of what we're building.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-filename">Claude Code Prompt</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="comment"># Example prompt for Claude Code</span>
Create a Next.js 14 property matcher app with:
- Supabase integration with pgvector for semantic search
- Property schema: id, address, price, bedrooms, bathrooms,
  sqft, description, features[], neighborhood, embedding vector
- API routes for: creating embeddings, searching properties,
  generating AI descriptions
- React components: PropertyCard, SearchInput, SavedSearches
- Use TypeScript throughout with proper type definitions</code></pre>
                </div>

                <h3 id="ai-ui">UI Generation with v0.dev</h3>
                <p>Use v0.dev to rapidly prototype the property listing cards and search interface. It excels at creating polished, responsive components that you can customize.</p>

                <div class="callout callout-tip">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>
                        Pro Tip
                    </div>
                    <p>When prompting v0.dev, include specific real estate UI patterns like "property card with image gallery, price badge, and quick-view features" to get industry-appropriate designs.</p>
                </div>

                <h3 id="ai-debugging">Development with Cursor</h3>
                <p>Cursor's AI capabilities shine when implementing the vector search logic and debugging embedding issues. Use Cmd+K to explain complex pgvector queries and generate TypeScript types from your database schema.</p>

                <!-- Section: Build Steps -->
                <h2 id="build-steps">Step-by-Step Build Guide</h2>

                <h3 id="phase-1">Phase 1: Property Database Schema</h3>
                <p>First, we'll set up Supabase with pgvector extension and create our property listings table. The schema includes all standard property fields plus a vector column for embeddings.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-filename">supabase/migrations/001_create_properties.sql</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="comment">-- Enable the pgvector extension</span>
<span class="keyword">CREATE EXTENSION IF NOT EXISTS</span> vector;

<span class="comment">-- Create the properties table with vector support</span>
<span class="keyword">CREATE TABLE</span> properties (
  id <span class="type">UUID</span> <span class="keyword">DEFAULT</span> gen_random_uuid() <span class="keyword">PRIMARY KEY</span>,
  address <span class="type">TEXT</span> <span class="keyword">NOT NULL</span>,
  city <span class="type">TEXT</span> <span class="keyword">NOT NULL</span>,
  state <span class="type">TEXT</span> <span class="keyword">NOT NULL</span>,
  zip_code <span class="type">TEXT</span> <span class="keyword">NOT NULL</span>,
  price <span class="type">INTEGER</span> <span class="keyword">NOT NULL</span>,
  bedrooms <span class="type">INTEGER</span> <span class="keyword">NOT NULL</span>,
  bathrooms <span class="type">DECIMAL</span>(3,1) <span class="keyword">NOT NULL</span>,
  sqft <span class="type">INTEGER</span> <span class="keyword">NOT NULL</span>,
  property_type <span class="type">TEXT</span> <span class="keyword">NOT NULL</span>, <span class="comment">-- house, condo, townhouse, etc.</span>
  description <span class="type">TEXT</span>,
  features <span class="type">TEXT</span>[] <span class="keyword">DEFAULT</span> <span class="string">'{}'</span>,
  neighborhood_description <span class="type">TEXT</span>,
  listing_date <span class="type">TIMESTAMPTZ</span> <span class="keyword">DEFAULT</span> now(),
  images <span class="type">TEXT</span>[] <span class="keyword">DEFAULT</span> <span class="string">'{}'</span>,
  <span class="comment">-- Vector embedding for semantic search (1536 dimensions for OpenAI)</span>
  embedding <span class="type">vector</span>(<span class="number">1536</span>),
  created_at <span class="type">TIMESTAMPTZ</span> <span class="keyword">DEFAULT</span> now(),
  updated_at <span class="type">TIMESTAMPTZ</span> <span class="keyword">DEFAULT</span> now()
);

<span class="comment">-- Create an index for fast vector similarity search</span>
<span class="keyword">CREATE INDEX</span> properties_embedding_idx
<span class="keyword">ON</span> properties
<span class="keyword">USING</span> ivfflat (embedding vector_cosine_ops)
<span class="keyword">WITH</span> (lists = <span class="number">100</span>);

<span class="comment">-- Create index for common filters</span>
<span class="keyword">CREATE INDEX</span> properties_price_idx <span class="keyword">ON</span> properties(price);
<span class="keyword">CREATE INDEX</span> properties_city_idx <span class="keyword">ON</span> properties(city);
<span class="keyword">CREATE INDEX</span> properties_bedrooms_idx <span class="keyword">ON</span> properties(bedrooms);</code></pre>
                </div>

                <h3 id="phase-2">Phase 2: Embedding Generation for Properties</h3>
                <p>Now we'll create the embedding generation logic. Each property gets converted to a rich text representation, then embedded using OpenAI's text-embedding-3-small model. This captures semantic meaning beyond simple keywords.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-filename">lib/embeddings.ts</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="keyword">import</span> OpenAI <span class="keyword">from</span> <span class="string">'openai'</span>;
<span class="keyword">import</span> { createClient } <span class="keyword">from</span> <span class="string">'@supabase/supabase-js'</span>;

<span class="keyword">const</span> openai = <span class="keyword">new</span> <span class="function">OpenAI</span>({ apiKey: process.env.OPENAI_API_KEY });
<span class="keyword">const</span> supabase = <span class="function">createClient</span>(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_KEY!
);

<span class="keyword">interface</span> <span class="type">Property</span> {
  id: <span class="type">string</span>;
  address: <span class="type">string</span>;
  city: <span class="type">string</span>;
  price: <span class="type">number</span>;
  bedrooms: <span class="type">number</span>;
  bathrooms: <span class="type">number</span>;
  sqft: <span class="type">number</span>;
  property_type: <span class="type">string</span>;
  description: <span class="type">string</span>;
  features: <span class="type">string</span>[];
  neighborhood_description: <span class="type">string</span>;
}

<span class="comment">/**
 * Create a rich text representation of a property for embedding.
 * This combines all property attributes into a semantic description.
 */</span>
<span class="keyword">export function</span> <span class="function">createPropertyText</span>(property: <span class="type">Property</span>): <span class="type">string</span> {
  <span class="keyword">const</span> priceRange = property.price < <span class="number">300000</span> ? <span class="string">'affordable'</span>
    : property.price < <span class="number">600000</span> ? <span class="string">'mid-range'</span>
    : property.price < <span class="number">1000000</span> ? <span class="string">'upscale'</span>
    : <span class="string">'luxury'</span>;

  <span class="keyword">const</span> sizeDescription = property.sqft < <span class="number">1000</span> ? <span class="string">'cozy'</span>
    : property.sqft < <span class="number">2000</span> ? <span class="string">'spacious'</span>
    : property.sqft < <span class="number">3500</span> ? <span class="string">'large'</span>
    : <span class="string">'expansive'</span>;

  <span class="keyword">return</span> <span class="string">`
    ${priceRange} ${property.property_type} in ${property.city}.
    ${property.bedrooms} bedrooms, ${property.bathrooms} bathrooms.
    ${sizeDescription} ${property.sqft} square feet.
    ${property.description || ''}
    Features: ${property.features.join(', ')}.
    Neighborhood: ${property.neighborhood_description || ''}
  `</span>.trim().replace(<span class="string">/\s+/g</span>, <span class="string">' '</span>);
}

<span class="comment">/**
 * Generate embedding for a property using OpenAI
 */</span>
<span class="keyword">export async function</span> <span class="function">generatePropertyEmbedding</span>(
  property: <span class="type">Property</span>
): <span class="type">Promise</span>&lt;<span class="type">number</span>[]&gt; {
  <span class="keyword">const</span> text = <span class="function">createPropertyText</span>(property);

  <span class="keyword">const</span> response = <span class="keyword">await</span> openai.embeddings.<span class="function">create</span>({
    model: <span class="string">'text-embedding-3-small'</span>,
    input: text,
  });

  <span class="keyword">return</span> response.data[<span class="number">0</span>].embedding;
}

<span class="comment">/**
 * Generate embedding for a user's search query
 */</span>
<span class="keyword">export async function</span> <span class="function">generateQueryEmbedding</span>(
  query: <span class="type">string</span>
): <span class="type">Promise</span>&lt;<span class="type">number</span>[]&gt; {
  <span class="keyword">const</span> response = <span class="keyword">await</span> openai.embeddings.<span class="function">create</span>({
    model: <span class="string">'text-embedding-3-small'</span>,
    input: query,
  });

  <span class="keyword">return</span> response.data[<span class="number">0</span>].embedding;
}

<span class="comment">/**
 * Update a property's embedding in the database
 */</span>
<span class="keyword">export async function</span> <span class="function">updatePropertyEmbedding</span>(
  propertyId: <span class="type">string</span>
): <span class="type">Promise</span>&lt;<span class="type">void</span>&gt; {
  <span class="comment">// Fetch the property</span>
  <span class="keyword">const</span> { data: property, error: fetchError } = <span class="keyword">await</span> supabase
    .<span class="function">from</span>(<span class="string">'properties'</span>)
    .<span class="function">select</span>(<span class="string">'*'</span>)
    .<span class="function">eq</span>(<span class="string">'id'</span>, propertyId)
    .<span class="function">single</span>();

  <span class="keyword">if</span> (fetchError) <span class="keyword">throw</span> fetchError;

  <span class="comment">// Generate embedding</span>
  <span class="keyword">const</span> embedding = <span class="keyword">await</span> <span class="function">generatePropertyEmbedding</span>(property);

  <span class="comment">// Update the property with the embedding</span>
  <span class="keyword">const</span> { error: updateError } = <span class="keyword">await</span> supabase
    .<span class="function">from</span>(<span class="string">'properties'</span>)
    .<span class="function">update</span>({ embedding })
    .<span class="function">eq</span>(<span class="string">'id'</span>, propertyId);

  <span class="keyword">if</span> (updateError) <span class="keyword">throw</span> updateError;
}</code></pre>
                </div>

                <div class="callout callout-info">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>
                        Understanding Embeddings
                    </div>
                    <p>text-embedding-3-small produces 1536-dimensional vectors. Properties with similar descriptions will have vectors that are "closer" in this high-dimensional space, enabling semantic search that understands meaning rather than just matching keywords.</p>
                </div>

                <h3 id="phase-3">Phase 3: User Preference Capture (Natural Language)</h3>
                <p>This is where the magic happens. Users describe their ideal property in natural language, and we convert that to an embedding that can be matched against our property database.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-filename">app/api/search/route.ts</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="keyword">import</span> { NextRequest, NextResponse } <span class="keyword">from</span> <span class="string">'next/server'</span>;
<span class="keyword">import</span> { generateQueryEmbedding } <span class="keyword">from</span> <span class="string">'@/lib/embeddings'</span>;
<span class="keyword">import</span> { createClient } <span class="keyword">from</span> <span class="string">'@supabase/supabase-js'</span>;

<span class="keyword">const</span> supabase = <span class="function">createClient</span>(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_KEY!
);

<span class="keyword">interface</span> <span class="type">SearchFilters</span> {
  minPrice?: <span class="type">number</span>;
  maxPrice?: <span class="type">number</span>;
  minBedrooms?: <span class="type">number</span>;
  city?: <span class="type">string</span>;
}

<span class="keyword">export async function</span> <span class="function">POST</span>(request: <span class="type">NextRequest</span>) {
  <span class="keyword">try</span> {
    <span class="keyword">const</span> { query, filters, limit = <span class="number">10</span> } = <span class="keyword">await</span> request.<span class="function">json</span>();

    <span class="keyword">if</span> (!query || <span class="keyword">typeof</span> query !== <span class="string">'string'</span>) {
      <span class="keyword">return</span> NextResponse.<span class="function">json</span>(
        { error: <span class="string">'Query is required'</span> },
        { status: <span class="number">400</span> }
      );
    }

    <span class="comment">// Generate embedding from user's natural language query</span>
    <span class="keyword">const</span> queryEmbedding = <span class="keyword">await</span> <span class="function">generateQueryEmbedding</span>(query);

    <span class="comment">// Build the vector similarity search with optional filters</span>
    <span class="keyword">const</span> { data: properties, error } = <span class="keyword">await</span> supabase
      .<span class="function">rpc</span>(<span class="string">'match_properties'</span>, {
        query_embedding: queryEmbedding,
        match_threshold: <span class="number">0.5</span>,
        match_count: limit,
        filter_min_price: (filters <span class="keyword">as</span> <span class="type">SearchFilters</span>)?.minPrice || <span class="number">0</span>,
        filter_max_price: (filters <span class="keyword">as</span> <span class="type">SearchFilters</span>)?.maxPrice || <span class="number">999999999</span>,
        filter_min_bedrooms: (filters <span class="keyword">as</span> <span class="type">SearchFilters</span>)?.minBedrooms || <span class="number">0</span>,
        filter_city: (filters <span class="keyword">as</span> <span class="type">SearchFilters</span>)?.city || <span class="keyword">null</span>,
      });

    <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;

    <span class="keyword">return</span> NextResponse.<span class="function">json</span>({
      properties,
      query,
      count: properties?.length || <span class="number">0</span>
    });

  } <span class="keyword">catch</span> (error) {
    console.<span class="function">error</span>(<span class="string">'Search error:'</span>, error);
    <span class="keyword">return</span> NextResponse.<span class="function">json</span>(
      { error: <span class="string">'Failed to search properties'</span> },
      { status: <span class="number">500</span> }
    );
  }
}</code></pre>
                </div>

                <h3 id="phase-4">Phase 4: Vector Similarity Search</h3>
                <p>We need a PostgreSQL function that combines vector similarity with traditional filters. This function uses cosine distance to find the most semantically similar properties.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-filename">supabase/migrations/002_match_properties_function.sql</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="comment">-- Create a function for semantic property search with filters</span>
<span class="keyword">CREATE OR REPLACE FUNCTION</span> <span class="function">match_properties</span>(
  query_embedding <span class="type">vector</span>(<span class="number">1536</span>),
  match_threshold <span class="type">float</span>,
  match_count <span class="type">int</span>,
  filter_min_price <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,
  filter_max_price <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">999999999</span>,
  filter_min_bedrooms <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,
  filter_city <span class="type">text</span> <span class="keyword">DEFAULT NULL</span>
)
<span class="keyword">RETURNS TABLE</span> (
  id <span class="type">uuid</span>,
  address <span class="type">text</span>,
  city <span class="type">text</span>,
  state <span class="type">text</span>,
  price <span class="type">int</span>,
  bedrooms <span class="type">int</span>,
  bathrooms <span class="type">decimal</span>,
  sqft <span class="type">int</span>,
  property_type <span class="type">text</span>,
  description <span class="type">text</span>,
  features <span class="type">text</span>[],
  neighborhood_description <span class="type">text</span>,
  images <span class="type">text</span>[],
  similarity <span class="type">float</span>
)
<span class="keyword">LANGUAGE</span> plpgsql
<span class="keyword">AS</span> $$
<span class="keyword">BEGIN</span>
  <span class="keyword">RETURN QUERY</span>
  <span class="keyword">SELECT</span>
    p.id,
    p.address,
    p.city,
    p.state,
    p.price,
    p.bedrooms,
    p.bathrooms,
    p.sqft,
    p.property_type,
    p.description,
    p.features,
    p.neighborhood_description,
    p.images,
    <span class="comment">-- Calculate cosine similarity (1 - cosine distance)</span>
    <span class="number">1</span> - (p.embedding <=> query_embedding) <span class="keyword">AS</span> similarity
  <span class="keyword">FROM</span> properties p
  <span class="keyword">WHERE</span>
    p.embedding <span class="keyword">IS NOT NULL</span>
    <span class="keyword">AND</span> <span class="number">1</span> - (p.embedding <=> query_embedding) > match_threshold
    <span class="keyword">AND</span> p.price >= filter_min_price
    <span class="keyword">AND</span> p.price <= filter_max_price
    <span class="keyword">AND</span> p.bedrooms >= filter_min_bedrooms
    <span class="keyword">AND</span> (filter_city <span class="keyword">IS NULL OR</span> p.city <span class="keyword">ILIKE</span> filter_city)
  <span class="keyword">ORDER BY</span> similarity <span class="keyword">DESC</span>
  <span class="keyword">LIMIT</span> match_count;
<span class="keyword">END</span>;
$$;</code></pre>
                </div>

                <h3 id="phase-5">Phase 5: AI-Enhanced Property Descriptions</h3>
                <p>Now we use Claude to generate personalized property descriptions that explain why each match fits the buyer's specific needs and preferences.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-filename">lib/descriptions.ts</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="keyword">import</span> Anthropic <span class="keyword">from</span> <span class="string">'@anthropic-ai/sdk'</span>;

<span class="keyword">const</span> anthropic = <span class="keyword">new</span> <span class="function">Anthropic</span>({
  apiKey: process.env.ANTHROPIC_API_KEY,
});

<span class="keyword">interface</span> <span class="type">Property</span> {
  address: <span class="type">string</span>;
  city: <span class="type">string</span>;
  price: <span class="type">number</span>;
  bedrooms: <span class="type">number</span>;
  bathrooms: <span class="type">number</span>;
  sqft: <span class="type">number</span>;
  property_type: <span class="type">string</span>;
  description: <span class="type">string</span>;
  features: <span class="type">string</span>[];
  neighborhood_description: <span class="type">string</span>;
  similarity: <span class="type">number</span>;
}

<span class="comment">/**
 * Generate a personalized property description based on user preferences
 */</span>
<span class="keyword">export async function</span> <span class="function">generatePersonalizedDescription</span>(
  property: <span class="type">Property</span>,
  userQuery: <span class="type">string</span>
): <span class="type">Promise</span>&lt;<span class="type">string</span>&gt; {
  <span class="keyword">const</span> prompt = <span class="string">`You are a knowledgeable real estate assistant helping a buyer find their perfect home.

The buyer is looking for: "${userQuery}"

Here's a property that matches their search (${Math.round(property.similarity * 100)}% match):

Property Details:
- Address: ${property.address}, ${property.city}
- Price: $${property.price.toLocaleString()}
- Type: ${property.property_type}
- Size: ${property.bedrooms} bed, ${property.bathrooms} bath, ${property.sqft.toLocaleString()} sqft
- Features: ${property.features.join(', ')}
- Original Description: ${property.description}
- Neighborhood: ${property.neighborhood_description}

Write a compelling 2-3 sentence description that:
1. Highlights why this property specifically matches what the buyer is looking for
2. Mentions the most relevant features based on their query
3. Uses warm, engaging language without being pushy

Do not include the price or address (those are shown separately). Focus on lifestyle fit and unique selling points.`</span>;

  <span class="keyword">const</span> response = <span class="keyword">await</span> anthropic.messages.<span class="function">create</span>({
    model: <span class="string">'claude-sonnet-4-20250514'</span>,
    max_tokens: <span class="number">200</span>,
    messages: [{ role: <span class="string">'user'</span>, content: prompt }],
  });

  <span class="keyword">return</span> (response.content[<span class="number">0</span>] <span class="keyword">as</span> { type: <span class="string">'text'</span>; text: <span class="type">string</span> }).text;
}

<span class="comment">/**
 * Generate descriptions for multiple properties in parallel
 */</span>
<span class="keyword">export async function</span> <span class="function">generateDescriptionsForMatches</span>(
  properties: <span class="type">Property</span>[],
  userQuery: <span class="type">string</span>
): <span class="type">Promise</span>&lt;{ property: <span class="type">Property</span>; personalizedDescription: <span class="type">string</span> }[]&gt; {
  <span class="keyword">const</span> results = <span class="keyword">await</span> Promise.<span class="function">all</span>(
    properties.<span class="function">map</span>(<span class="keyword">async</span> (property) => ({
      property,
      personalizedDescription: <span class="keyword">await</span> <span class="function">generatePersonalizedDescription</span>(
        property,
        userQuery
      ),
    }))
  );

  <span class="keyword">return</span> results;
}</code></pre>
                </div>

                <h3 id="phase-6">Phase 6: Saved Searches and Alerts</h3>
                <p>Finally, we implement saved searches that allow users to receive notifications when new properties matching their preferences are listed.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-filename">supabase/migrations/003_saved_searches.sql</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="comment">-- Create saved searches table</span>
<span class="keyword">CREATE TABLE</span> saved_searches (
  id <span class="type">UUID</span> <span class="keyword">DEFAULT</span> gen_random_uuid() <span class="keyword">PRIMARY KEY</span>,
  user_id <span class="type">UUID</span> <span class="keyword">REFERENCES</span> auth.users(id) <span class="keyword">ON DELETE CASCADE</span>,
  name <span class="type">TEXT</span> <span class="keyword">NOT NULL</span>,
  query_text <span class="type">TEXT</span> <span class="keyword">NOT NULL</span>,
  query_embedding <span class="type">vector</span>(<span class="number">1536</span>) <span class="keyword">NOT NULL</span>,
  filters <span class="type">JSONB</span> <span class="keyword">DEFAULT</span> <span class="string">'{}'</span>,
  email_alerts <span class="type">BOOLEAN</span> <span class="keyword">DEFAULT</span> <span class="keyword">true</span>,
  last_alert_sent <span class="type">TIMESTAMPTZ</span>,
  created_at <span class="type">TIMESTAMPTZ</span> <span class="keyword">DEFAULT</span> now()
);

<span class="comment">-- Create table to track which properties users have been alerted about</span>
<span class="keyword">CREATE TABLE</span> search_alerts_sent (
  id <span class="type">UUID</span> <span class="keyword">DEFAULT</span> gen_random_uuid() <span class="keyword">PRIMARY KEY</span>,
  saved_search_id <span class="type">UUID</span> <span class="keyword">REFERENCES</span> saved_searches(id) <span class="keyword">ON DELETE CASCADE</span>,
  property_id <span class="type">UUID</span> <span class="keyword">REFERENCES</span> properties(id) <span class="keyword">ON DELETE CASCADE</span>,
  sent_at <span class="type">TIMESTAMPTZ</span> <span class="keyword">DEFAULT</span> now(),
  <span class="keyword">UNIQUE</span>(saved_search_id, property_id)
);

<span class="comment">-- Function to find new matching properties for saved searches</span>
<span class="keyword">CREATE OR REPLACE FUNCTION</span> <span class="function">get_new_matches_for_saved_search</span>(
  search_id <span class="type">UUID</span>,
  match_threshold <span class="type">float</span> <span class="keyword">DEFAULT</span> <span class="number">0.6</span>,
  max_results <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">5</span>
)
<span class="keyword">RETURNS TABLE</span> (
  property_id <span class="type">uuid</span>,
  address <span class="type">text</span>,
  city <span class="type">text</span>,
  price <span class="type">int</span>,
  similarity <span class="type">float</span>
)
<span class="keyword">LANGUAGE</span> plpgsql
<span class="keyword">AS</span> $$
<span class="keyword">DECLARE</span>
  search_embedding <span class="type">vector</span>(<span class="number">1536</span>);
  search_filters <span class="type">jsonb</span>;
<span class="keyword">BEGIN</span>
  <span class="comment">-- Get the saved search details</span>
  <span class="keyword">SELECT</span> query_embedding, filters
  <span class="keyword">INTO</span> search_embedding, search_filters
  <span class="keyword">FROM</span> saved_searches
  <span class="keyword">WHERE</span> id = search_id;

  <span class="keyword">RETURN QUERY</span>
  <span class="keyword">SELECT</span>
    p.id <span class="keyword">AS</span> property_id,
    p.address,
    p.city,
    p.price,
    <span class="number">1</span> - (p.embedding <=> search_embedding) <span class="keyword">AS</span> similarity
  <span class="keyword">FROM</span> properties p
  <span class="keyword">WHERE</span>
    p.embedding <span class="keyword">IS NOT NULL</span>
    <span class="keyword">AND</span> <span class="number">1</span> - (p.embedding <=> search_embedding) > match_threshold
    <span class="comment">-- Only include properties not already sent</span>
    <span class="keyword">AND NOT EXISTS</span> (
      <span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> search_alerts_sent sas
      <span class="keyword">WHERE</span> sas.saved_search_id = search_id
      <span class="keyword">AND</span> sas.property_id = p.id
    )
    <span class="comment">-- Apply price filters from saved search</span>
    <span class="keyword">AND</span> p.price >= <span class="keyword">COALESCE</span>((search_filters->><span class="string">'minPrice'</span>)::<span class="type">int</span>, <span class="number">0</span>)
    <span class="keyword">AND</span> p.price <= <span class="keyword">COALESCE</span>((search_filters->><span class="string">'maxPrice'</span>)::<span class="type">int</span>, <span class="number">999999999</span>)
  <span class="keyword">ORDER BY</span> similarity <span class="keyword">DESC</span>
  <span class="keyword">LIMIT</span> max_results;
<span class="keyword">END</span>;
$$;</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-filename">app/api/saved-searches/route.ts</span>
                        <button class="code-copy-btn" aria-label="Copy code">Copy</button>
                    </div>
                    <pre><code><span class="keyword">import</span> { NextRequest, NextResponse } <span class="keyword">from</span> <span class="string">'next/server'</span>;
<span class="keyword">import</span> { generateQueryEmbedding } <span class="keyword">from</span> <span class="string">'@/lib/embeddings'</span>;
<span class="keyword">import</span> { createClient } <span class="keyword">from</span> <span class="string">'@supabase/supabase-js'</span>;
<span class="keyword">import</span> { auth } <span class="keyword">from</span> <span class="string">'@/lib/auth'</span>;

<span class="keyword">const</span> supabase = <span class="function">createClient</span>(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_KEY!
);

<span class="keyword">export async function</span> <span class="function">POST</span>(request: <span class="type">NextRequest</span>) {
  <span class="keyword">try</span> {
    <span class="keyword">const</span> session = <span class="keyword">await</span> <span class="function">auth</span>();
    <span class="keyword">if</span> (!session?.user) {
      <span class="keyword">return</span> NextResponse.<span class="function">json</span>(
        { error: <span class="string">'Unauthorized'</span> },
        { status: <span class="number">401</span> }
      );
    }

    <span class="keyword">const</span> { name, query, filters, emailAlerts = <span class="keyword">true</span> } =
      <span class="keyword">await</span> request.<span class="function">json</span>();

    <span class="comment">// Generate embedding for the search query</span>
    <span class="keyword">const</span> queryEmbedding = <span class="keyword">await</span> <span class="function">generateQueryEmbedding</span>(query);

    <span class="comment">// Save the search with its embedding</span>
    <span class="keyword">const</span> { data, error } = <span class="keyword">await</span> supabase
      .<span class="function">from</span>(<span class="string">'saved_searches'</span>)
      .<span class="function">insert</span>({
        user_id: session.user.id,
        name,
        query_text: query,
        query_embedding: queryEmbedding,
        filters,
        email_alerts: emailAlerts,
      })
      .<span class="function">select</span>()
      .<span class="function">single</span>();

    <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;

    <span class="keyword">return</span> NextResponse.<span class="function">json</span>({ savedSearch: data });
  } <span class="keyword">catch</span> (error) {
    console.<span class="function">error</span>(<span class="string">'Save search error:'</span>, error);
    <span class="keyword">return</span> NextResponse.<span class="function">json</span>(
      { error: <span class="string">'Failed to save search'</span> },
      { status: <span class="number">500</span> }
    );
  }
}</code></pre>
                </div>

                <!-- Section: Common Issues -->
                <h2 id="common-issues">Common Issues & Solutions</h2>
                <p>Here are some common issues you might encounter and how to solve them:</p>

                <div class="callout callout-warning">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        Embedding Dimension Mismatch
                    </div>
                    <p>If you see "different vector dimensions" errors, ensure your vector column is 1536 dimensions (matching text-embedding-3-small). If using a different model, adjust the column definition accordingly.</p>
                </div>

                <div class="callout callout-warning">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        Slow Vector Searches
                    </div>
                    <p>If searches are slow with many properties, ensure you've created the IVFFlat index. For production with 100k+ properties, consider using HNSW index instead: CREATE INDEX ... USING hnsw (embedding vector_cosine_ops).</p>
                </div>

                <div class="callout callout-warning">
                    <div class="callout-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        Poor Match Quality
                    </div>
                    <p>If matches don't seem relevant, improve your property text representation in createPropertyText(). Include more semantic descriptors like "great for families", "walkable neighborhood", or "quiet street" based on property attributes.</p>
                </div>

                <p>Other tips for debugging:</p>
                <ul>
                    <li><strong>Test embeddings directly:</strong> Use OpenAI's playground to verify your embedding text makes semantic sense</li>
                    <li><strong>Log similarity scores:</strong> Add console logs to see what similarity scores you're getting - adjust threshold if needed</li>
                    <li><strong>Check for null embeddings:</strong> Ensure all properties have embeddings generated before searching</li>
                    <li><strong>Rate limits:</strong> OpenAI has rate limits on embeddings - batch requests and add retry logic for production</li>
                </ul>

                <!-- Section: Next Steps -->
                <h2 id="next-steps">Next Steps</h2>
                <p>Congratulations on building your AI Property Matcher! Here are some ways to extend and improve the system:</p>

                <ul>
                    <li><strong>Add hybrid search:</strong> Combine vector similarity with keyword search for better results when users mention specific features like "pool" or "granite counters"</li>
                    <li><strong>Implement re-ranking:</strong> Use Claude to re-rank the top results based on more nuanced understanding of user preferences</li>
                    <li><strong>Add user feedback loop:</strong> Track which properties users favorite or dismiss to improve future recommendations</li>
                    <li><strong>Integrate MLS data:</strong> Connect to real MLS/IDX feeds for live property data in your target market</li>
                    <li><strong>Build a chatbot:</strong> Create a conversational interface where users can refine their search through dialogue</li>
                    <li><strong>Add image embeddings:</strong> Use CLIP or similar models to match based on property photos as well as descriptions</li>
                </ul>

                <!-- Share Section -->
                <div class="share-section">
                    <span class="share-label">Share this guide:</span>
                    <div class="share-buttons" role="group" aria-label="Share this guide">
                        <button class="share-btn" data-share="twitter" title="Share on Twitter" aria-label="Share on Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </button>
                        <button class="share-btn" data-share="linkedin" title="Share on LinkedIn" aria-label="Share on LinkedIn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                        </button>
                        <button class="share-btn" data-share="copy" title="Copy link" aria-label="Copy link to clipboard">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                            </svg>
                        </button>
                        <button class="share-btn" data-share="email" title="Share via email" aria-label="Share via email">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Related Guides -->
                <div class="related-guides">
                    <h3 class="related-guides-title">Related Guides</h3>
                    <div class="related-guides-grid">
                        <a href="/guides/ecommerce-ai-recommender.html" class="related-guide-card">
                            <h4>Build an AI Product Recommender</h4>
                            <p>Similar embedding techniques for e-commerce product recommendations</p>
                        </a>
                        <a href="/guides/fintech-ai-dashboard.html" class="related-guide-card">
                            <h4>Build an AI Finance Dashboard</h4>
                            <p>AI-powered insights and analysis for financial data</p>
                        </a>
                        <a href="/guides/healthtech-patient-portal.html" class="related-guide-card">
                            <h4>Build a Smart Patient Portal</h4>
                            <p>AI-assisted healthcare platform with intelligent features</p>
                        </a>
                    </div>
                </div>

                <!-- Follow Section -->
                <div class="follow-section">
                    <h3>Follow the Vibe Coding Enthusiast</h3>
                    <p>Follow JD â€” product updates on LinkedIn, personal takes on X.</p>
                    <div class="social-follow-buttons">
                        <a href="https://www.linkedin.com/in/jeremiahddavid/" target="_blank" rel="noopener noreferrer" class="social-follow-btn linkedin">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                            Follow on LinkedIn
                        </a>
                        <a href="https://x.com/jeremiahddavid" target="_blank" rel="noopener noreferrer" class="social-follow-btn twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                            Follow on X
                        </a>
                    </div>
                </div>
            </article>
        </div>
    </main>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M18 15l-6-6-6 6"/>
        </svg>
    </button>

        <footer class="footer">
    <div class="container">
        <div class="footer-simple">
            <div class="footer-brand">
                <a href="/" class="footer-logo">
                    <img src="/favicon.png" alt="Vibe Coding Enthusiast" class="logo-icon" width="28" height="28">
                    <span>Vibe Coding Enthusiast</span>
                </a>
                <p>Free guides for building with AI</p>
            </div>

            <nav class="footer-nav">
                <a href="/guides/">Guides</a>
                <span class="footer-dot">Â·</span>
                <a href="/paths/">Paths</a>
                <span class="footer-dot">Â·</span>
                <a href="/learn/">Learn</a>
                <span class="footer-dot">Â·</span>
                <a href="/tools/">Tools</a>
                <span class="footer-dot">Â·</span>
                <a href="/stacks/">Stacks</a>
                <span class="footer-dot">Â·</span>
                <a href="/#about">About</a>
            </nav>

            <div class="footer-social">
                <a href="https://www.linkedin.com/in/jeremiahddavid/" target="_blank" rel="noopener noreferrer" aria-label="Follow on LinkedIn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                </a>
                <a href="https://x.com/jeremiahddavid" target="_blank" rel="noopener noreferrer" aria-label="Follow on X">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            <p>Â© 2025 Vibe Coding Enthusiast</p>
            <div class="footer-legal">
                <a href="/privacy.html">Privacy</a>
                <a href="/terms.html">Terms</a>
            </div>
        </div>
    </div>
</footer>

    <script src="/script.js"></script>

    <!-- Guide-Specific JavaScript -->
    <script>
        // Reading Progress Bar
        (function() {
            const progressBar = document.getElementById('readingProgress');
            const article = document.querySelector('.article-content');

            if (progressBar && article) {
                window.addEventListener('scroll', function() {
                    const articleTop = article.offsetTop;
                    const articleHeight = article.offsetHeight;
                    const windowHeight = window.innerHeight;
                    const scrollTop = window.scrollY;

                    const progress = Math.min(100, Math.max(0,
                        ((scrollTop - articleTop + windowHeight * 0.3) / articleHeight) * 100
                    ));

                    progressBar.style.width = progress + '%';
                    progressBar.setAttribute('aria-valuenow', Math.round(progress));
                });
            }
        })();

        // Generate Table of Contents
        (function() {
            const article = document.querySelector('.article-content');
            const tocList = document.getElementById('tocList');

            if (article && tocList) {
                const headings = article.querySelectorAll('h2, h3');
                let tocHTML = '';

                headings.forEach(function(heading) {
                    const id = heading.getAttribute('id');
                    const text = heading.textContent.replace(/#/g, '').trim();
                    const level = heading.tagName.toLowerCase();
                    const className = level === 'h3' ? 'toc-h3' : '';

                    if (id) {
                        tocHTML += '<li><a href="#' + id + '" class="' + className + '">' + text + '</a></li>';

                        // Add anchor link to heading
                        const anchor = document.createElement('a');
                        anchor.href = '#' + id;
                        anchor.className = 'anchor-link';
                        anchor.setAttribute('aria-label', 'Link to ' + text);
                        anchor.textContent = '#';
                        heading.appendChild(anchor);
                    }
                });

                tocList.innerHTML = tocHTML;

                // Highlight active TOC item on scroll
                const tocLinks = tocList.querySelectorAll('a');

                function updateActiveTOC() {
                    const scrollPos = window.scrollY + 120;

                    headings.forEach(function(heading, index) {
                        const id = heading.getAttribute('id');
                        const headingTop = heading.offsetTop;
                        const nextHeading = headings[index + 1];
                        const nextTop = nextHeading ? nextHeading.offsetTop : document.body.scrollHeight;

                        if (scrollPos >= headingTop && scrollPos < nextTop) {
                            tocLinks.forEach(function(link) {
                                link.classList.remove('active');
                                if (link.getAttribute('href') === '#' + id) {
                                    link.classList.add('active');
                                }
                            });
                        }
                    });
                }

                window.addEventListener('scroll', updateActiveTOC);
                updateActiveTOC();
            }
        })();

        // Copy Code Button
        (function() {
            const copyButtons = document.querySelectorAll('.code-copy-btn');

            copyButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    const codeBlock = this.closest('.code-block');
                    const code = codeBlock.querySelector('code');
                    const text = code.textContent;

                    navigator.clipboard.writeText(text).then(function() {
                        button.textContent = 'Copied!';
                        button.classList.add('copied');

                        setTimeout(function() {
                            button.textContent = 'Copy';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(function(err) {
                        console.error('Failed to copy:', err);
                    });
                });
            });
        })();

        // Share Buttons
        (function() {
            const shareButtons = document.querySelectorAll('.share-btn');
            const pageTitle = document.title;
            const pageUrl = window.location.href;

            shareButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    const shareType = this.getAttribute('data-share');
                    let shareUrl = '';

                    switch(shareType) {
                        case 'twitter':
                            shareUrl = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(pageTitle) + '&url=' + encodeURIComponent(pageUrl);
                            window.open(shareUrl, '_blank', 'width=550,height=420');
                            break;
                        case 'linkedin':
                            shareUrl = 'https://www.linkedin.com/sharing/share-offsite/?url=' + encodeURIComponent(pageUrl);
                            window.open(shareUrl, '_blank', 'width=550,height=420');
                            break;
                        case 'copy':
                            navigator.clipboard.writeText(pageUrl).then(function() {
                                // Show feedback
                                const originalTitle = button.getAttribute('title');
                                button.setAttribute('title', 'Link copied!');
                                setTimeout(function() {
                                    button.setAttribute('title', originalTitle);
                                }, 2000);
                            });
                            break;
                        case 'email':
                            shareUrl = 'mailto:?subject=' + encodeURIComponent(pageTitle) + '&body=' + encodeURIComponent('Check out this guide: ' + pageUrl);
                            window.location.href = shareUrl;
                            break;
                    }
                });
            });
        })();
    </script>
</body>
</html>
